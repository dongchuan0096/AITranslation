2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 08:29:33 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 08:29:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:33 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 08:29:39 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 08:29:39 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 08:29:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:39 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 08:29:39 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 08:29:39 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 08:29:39 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 08:29:39 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 08:29:39 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 08:29:39 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 08:29:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:41 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 08:29:41 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 08:29:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:41 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 08:29:41 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 08:29:41 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 08:29:41 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 08:29:41 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 08:29:41 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 08:29:41 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 08:29:41 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 08:29:46 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功(使用默认路径)。耗时: 4.41 秒[0m
2025-06-26 08:29:46 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 08:29:56 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 08:29:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:56 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 08:29:59 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 08:29:59 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 08:29:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:29:59 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 08:29:59 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 08:29:59 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 08:29:59 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 08:29:59 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 08:29:59 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 08:29:59 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 08:30:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:00 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 08:30:00 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 08:30:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:00 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 08:30:00 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 08:30:00 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 08:30:00 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 08:30:00 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 08:30:00 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 08:30:00 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 08:30:00 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 08:30:00 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 08:30:00 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 08:30:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 08:30:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 08:30:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 08:30:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 08:30:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 08:30:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 08:30:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 08:30:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 08:30:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 08:30:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 08:30:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 08:30:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 09:06:19 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-26 09:06:19 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today's fast-paced digital ...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 09:06:40 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today's fast-paced digital ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-26 09:06:40 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-26 09:11:14 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-26 09:11:14 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today's fast-paced digital ...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 09:11:25 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today's fast-paced digital ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-26 09:11:25 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-26 09:11:35 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-26 09:11:35 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '在当今快节奏的数字世界中，技术持续重塑着我们的生活、工作和沟...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 09:11:59 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '在当今快节奏的数字世界中，技术持续重塑着我们的生活、工作和沟...' -> '{
"detected": "zh",
"translati...'[0m
2025-06-26 09:11:59 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-26 09:26:59 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-26 09:26:59 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today's fast-paced digital ...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 09:27:26 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today's fast-paced digital ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-26 09:27:26 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-26 09:36:14 - SessionAPI - [32mINFO[0m - [32m收到列出所有会话请求...[0m
2025-06-26 09:36:14 - SessionManager - [32mINFO[0m - [32m开始列出已保存的会话...[0m
2025-06-26 09:36:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 09:36:14 - SessionManager - [32mINFO[0m - [32m找到 1 个有效会话。[0m
2025-06-26 09:36:14 - SessionAPI - [32mINFO[0m - [32mAPI: 成功获取到 1 个会话。[0m
2025-06-26 09:49:47 - SystemAPI - [32mINFO[0m - [32m收到批量下载请求[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 09:57:48 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 09:59:56 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:01:42 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:01:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:42 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:01:45 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:01:45 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:01:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:45 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:01:45 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:01:45 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:01:45 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:01:45 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:01:45 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:01:45 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:01:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:46 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:01:46 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:01:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:01:46 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:01:46 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:01:46 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:01:46 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:01:47 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:01:47 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:01:47 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:01:47 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:01:47 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:01:47 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:01:47 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:02:34 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:03:05 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:04:20 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:04:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:04:51 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:05:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:05:05 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:05:05 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:05:06 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:05:06 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:05:06 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:05:06 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:05:06 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.92s)[0m
2025-06-26 10:05:06 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:05:08 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:05:08 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:07:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (1281, 1382)[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:07:20 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:07:20 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:07:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:07:20 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:07:20 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:07:20 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:07:20 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.36s)[0m
2025-06-26 10:07:20 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:07:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:07:20 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:07:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:07:45 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:07:45 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:07:46 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:07:46 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:07:46 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:07:46 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:07:46 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.60s)[0m
2025-06-26 10:07:46 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:07:48 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:07:48 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:08:29 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:08:29 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:08:29 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:08:29 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:08:29 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:08:30 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:08:30 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:08:30 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.65s)[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:08:30 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:08:30 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:08:30 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:08:30 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:08:30 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:08:30 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:08:30 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:08:30 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:08:30 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.09s)[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:08:30 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:08:30 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:08:30 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:08:30 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:08:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:30 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:08:30 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:08:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.63s)[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:08:32 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:08:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:32 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 10:08:32 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:08:32 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.64s[0m
2025-06-26 10:08:35 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:08:35 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:08:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:08:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:08:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:08:36 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:08:36 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:08:36 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:08:36 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:08:36 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:08:36 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:09:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:29 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:29 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:29 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:32 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:32 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:32 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:32 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:32 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:32 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:32 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:32 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:32 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:09:32 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:09:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:09:41 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:09:51 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:10:08 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:10:08 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:10:08 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:10:08 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:10:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:10:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:10:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:10:09 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:10:09 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:10:09 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:10:09 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:10:09 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:10:09 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:10:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:10:19 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:11:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:11:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:11:03 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:11:03 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:11:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:11:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:11:03 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:11:03 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:11:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:11:03 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:11:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:10 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:11:15 - SessionAPI - [32mINFO[0m - [32m收到列出所有会话请求...[0m
2025-06-26 10:11:15 - SessionManager - [32mINFO[0m - [32m开始列出已保存的会话...[0m
2025-06-26 10:11:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:15 - SessionManager - [32mINFO[0m - [32m找到 1 个有效会话。[0m
2025-06-26 10:11:15 - SessionAPI - [32mINFO[0m - [32mAPI: 成功获取到 1 个会话。[0m
2025-06-26 10:11:18 - SessionAPI - [32mINFO[0m - [32m收到加载会话请求: name='1'[0m
2025-06-26 10:11:18 - SessionManager - [32mINFO[0m - [32m开始加载会话: 1[0m
2025-06-26 10:11:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:18 - SessionManager - [32mINFO[0m - [32m成功加载会话元数据: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\data\sessions\1\session_meta.json[0m
2025-06-26 10:11:18 - SessionManager - [32mINFO[0m - [32m会话 '1' 加载完成，共加载 1 张图片状态。[0m
2025-06-26 10:11:18 - SessionAPI - [32mINFO[0m - [32mAPI: 会话 '1' 加载成功。[0m
2025-06-26 10:11:18 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:11:27 - SessionAPI - [32mINFO[0m - [32m收到保存会话请求...[0m
2025-06-26 10:11:27 - SessionManager - [32mINFO[0m - [32m开始保存会话: 1[0m
2025-06-26 10:11:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:27 - SessionManager - [33mWARNING[0m - [33m会话 '1' 已存在，将覆盖。[0m
2025-06-26 10:11:27 - SessionManager - [32mINFO[0m - [32m成功保存会话元数据: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\data\sessions\1\session_meta.json[0m
2025-06-26 10:11:27 - SessionManager - [32mINFO[0m - [32m会话 '1' 已成功保存到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\data\sessions\1[0m
2025-06-26 10:11:27 - SessionAPI - [32mINFO[0m - [32mAPI: 会话 '1' 保存成功。[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:11:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:11:33 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:11:33 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:11:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:11:33 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:11:34 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:11:34 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:11:34 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.54s)[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:11:34 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:11:34 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:11:34 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:11:34 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:11:34 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:11:34 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:11:34 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:11:34 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:11:34 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:11:34 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:11:34 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:11:34 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:11:34 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:11:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:34 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:11:34 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:11:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.61s)[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:11:36 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:11:36 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:11:36 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.47s[0m
2025-06-26 10:11:39 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:11:39 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:11:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:11:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:11:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:11:40 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:11:40 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:11:40 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:11:40 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:11:40 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:11:40 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:12:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:12:04 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:12:04 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:12:04 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:12:04 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:12:05 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:12:05 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:12:05 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.42s)[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:12:05 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:12:05 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:12:05 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:12:05 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:12:05 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:12:05 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:12:05 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:12:05 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:12:05 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.06s)[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:12:05 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:12:05 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:12:05 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:12:05 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:12:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:05 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:12:05 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:12:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.35s)[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:12:07 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:12:07 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:12:07 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.08s[0m
2025-06-26 10:12:10 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:12:10 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:12:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:12:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:12:20 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:12:20 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:12:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:12:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:12:20 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:12:20 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:12:20 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:12:20 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:12:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:12:29 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:12:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:12:39 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:12:39 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:12:40 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:12:40 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:12:40 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:12:40 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:12:40 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.56s)[0m
2025-06-26 10:12:40 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:12:42 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:12:42 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:14:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:14:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:14:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:14:09 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:14:09 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:14:09 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:14:09 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:14:09 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:14:09 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:14:09 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.49s)[0m
2025-06-26 10:14:09 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:14:11 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:14:11 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:16:06 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:16:06 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:16:06 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:16:06 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:16:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:16:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:16:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:16:07 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:16:07 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:16:07 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:16:07 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:16:07 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:16:07 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:16:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:16:13 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:16:21 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:16:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:16:31 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:16:31 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:16:31 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:16:31 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:16:31 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:16:31 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:16:31 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.47s)[0m
2025-06-26 10:16:31 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:16:33 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:16:33 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:17:08 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:17:08 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:17:11 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:17:11 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:17:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:34 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:17:35 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:17:35 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:17:35 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:17:35 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:17:35 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:17:35 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.45s)[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:17:35 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:17:35 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:17:35 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:17:35 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:17:35 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:17:35 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:17:35 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:17:35 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:17:35 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:17:35 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:17:35 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:17:35 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:17:35 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:17:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:36 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:17:36 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:17:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.68s)[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:17:38 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:17:38 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:17:38 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.49s[0m
2025-06-26 10:17:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:17:41 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:17:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:17:41 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:17:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:17:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:17:42 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:17:42 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:17:42 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:17:42 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:17:42 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:17:42 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:19:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:19:12 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:19:12 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:19:12 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:19:12 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.56s)[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:19:12 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:19:12 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:19:12 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:19:12 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:19:12 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:19:12 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:19:12 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:19:12 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:19:12 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:19:12 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:19:12 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:19:12 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:19:12 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:13 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:19:13 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.70s)[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:19:15 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:19:15 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:19:15 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.61s[0m
2025-06-26 10:19:18 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:19:18 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:19:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:19:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:19:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:19:19 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:19:19 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:19:19 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:19:19 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:19:19 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:19:19 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:19:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:19:42 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:19:42 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:19:42 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:19:42 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:19:43 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:19:43 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:19:43 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.36s)[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:19:43 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:19:43 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:19:43 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:19:43 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:19:43 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:19:43 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:19:43 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:19:43 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.06s)[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:19:43 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:19:43 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.01s)[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:19:43 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:19:43 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:19:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:43 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:19:43 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:19:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.25s)[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:19:45 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:19:45 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:19:45 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 2.91s[0m
2025-06-26 10:19:47 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:19:47 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:19:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:19:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:19:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:19:48 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:19:48 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:19:48 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:19:48 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:19:48 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:19:48 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:20:00 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:20:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:00 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:20:03 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:20:03 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:20:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:20:03 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:20:03 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:20:03 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:20:03 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:20:03 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:20:03 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:20:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:04 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:20:04 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:20:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:04 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:20:04 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:20:04 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:20:04 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:20:04 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:20:04 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:20:04 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:20:04 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:20:09 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功(使用默认路径)。耗时: 4.64 秒[0m
2025-06-26 10:20:09 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:20:18 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:20:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:18 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:20:21 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:20:21 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:20:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:21 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:20:21 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:20:21 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:20:21 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:20:21 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:20:21 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:20:21 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:20:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:22 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:20:22 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:20:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:22 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:20:22 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:20:22 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:20:22 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:20:22 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:20:22 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:20:22 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:20:22 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:20:22 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:20:22 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 10:20:22 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:20:22 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:20:22 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:20:22 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:20:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:20:23 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:20:23 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:20:23 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:20:23 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:20:23 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:20:23 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:20:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:22:54 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:22:54 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:54 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:54 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:22:57 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:22:57 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:22:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:57 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:22:57 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:22:57 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:22:57 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:22:57 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:22:57 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:22:57 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:22:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:58 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:22:58 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:22:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:22:58 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:22:58 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:22:58 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:22:58 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:22:58 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:22:58 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:22:58 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:22:58 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:23:15 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功(使用默认路径)。耗时: 16.94 秒[0m
2025-06-26 10:23:15 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:23:23 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:23:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:23 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:23:26 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:23:26 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:23:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:26 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:23:26 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:23:26 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:23:26 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:23:26 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:23:26 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:23:26 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:23:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:27 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:23:27 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:23:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:27 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:23:27 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:23:27 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:23:27 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:23:27 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:23:27 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:23:27 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:23:27 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:23:27 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:23:27 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 10:23:27 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:23:27 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:23:27 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:23:27 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:23:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:23:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:23:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:23:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:23:28 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:23:28 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:23:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:23:42 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:23:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:23:48 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:23:48 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:23:48 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:23:48 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:23:49 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:23:49 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:23:49 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.61s)[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:23:49 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-26 10:23:49 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:23:49 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:23:49 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:23:49 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:23:49 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:23:49 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:23:49 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:23:49 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.09s)[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:23:49 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:23:49 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:23:49 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:23:49 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:23:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:49 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:23:49 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:23:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.65s)[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:23:51 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:23:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:51 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 10:23:51 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:23:51 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.58s[0m
2025-06-26 10:23:54 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:23:54 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:23:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:23:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:23:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:23:55 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:23:55 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:23:55 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:23:55 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:23:55 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:23:55 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:27:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:27:40 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:27:40 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:27:41 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:27:41 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:27:41 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:27:41 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:27:41 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:27:41 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.51s)[0m
2025-06-26 10:27:41 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:27:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:27:41 - PaddleOCR - [32mINFO[0m - [32m使用模型目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\models\paddle_ocr[0m
2025-06-26 10:27:41 - PaddleOCR - [32mINFO[0m - [32m正在下载japan文本检测模型...[0m
2025-06-26 10:27:41 - PaddleOCR - [32mINFO[0m - [32m开始下载模型: https://paddleocr.bj.bcebos.com/PP-OCRv3/english/en_PP-OCRv3_det_infer.tar[0m
2025-06-26 10:27:57 - PaddleOCR - [32mINFO[0m - [32m
下载完成[0m
2025-06-26 10:27:57 - PaddleOCR - [32mINFO[0m - [32m正在解压模型文件到 C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\models\paddle_ocr\det_en[0m
2025-06-26 10:27:58 - PaddleOCR - [32mINFO[0m - [32m模型解压完成[0m
2025-06-26 10:27:58 - PaddleOCR - [32mINFO[0m - [32m正在下载japan文本识别模型...[0m
2025-06-26 10:27:58 - PaddleOCR - [32mINFO[0m - [32m开始下载模型: https://paddleocr.bj.bcebos.com/PP-OCRv3/english/en_PP-OCRv3_rec_infer.tar[0m
2025-06-26 10:28:10 - PaddleOCR - [32mINFO[0m - [32m
下载完成[0m
2025-06-26 10:28:10 - PaddleOCR - [32mINFO[0m - [32m正在解压模型文件到 C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\models\paddle_ocr\rec_en[0m
2025-06-26 10:28:10 - PaddleOCR - [32mINFO[0m - [32m模型解压完成[0m
2025-06-26 10:28:10 - PaddleOCR - [32mINFO[0m - [32m正在下载文本方向分类模型...[0m
2025-06-26 10:28:10 - PaddleOCR - [32mINFO[0m - [32m开始下载模型: https://paddleocr.bj.bcebos.com/dygraph_v2.0/ch/ch_ppocr_mobile_v2.0_cls_infer.tar[0m
2025-06-26 10:28:11 - PaddleOCR - [32mINFO[0m - [32m
下载完成[0m
2025-06-26 10:28:11 - PaddleOCR - [32mINFO[0m - [32m正在解压模型文件到 C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\models\paddle_ocr\cls[0m
2025-06-26 10:28:11 - PaddleOCR - [32mINFO[0m - [32m模型解压完成[0m
2025-06-26 10:28:11 - PaddleOCR - [31mERROR[0m - [31mPaddleOCR模块未安装，请使用pip install paddleocr安装[0m
2025-06-26 10:28:11 - PaddleOCR - [31mERROR[0m - [31m初始化PaddleOCR失败: 需要先安装PaddleOCR: pip install paddleocr[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 54, in initialize
    from paddleocr import PaddleOCR
ModuleNotFoundError: No module named 'paddleocr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 57, in initialize
    raise ImportError("需要先安装PaddleOCR: pip install paddleocr")
ImportError: 需要先安装PaddleOCR: pip install paddleocr
2025-06-26 10:28:11 - CoreOCR - [31mERROR[0m - [31m无法初始化 PaddleOCR (japan)，OCR 步骤跳过。[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 30.18s)[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:28:11 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:28:11 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:28:11 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:28:11 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:28:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:12 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:28:12 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:28:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:28:14 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:28:14 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:28:14 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 33.23s[0m
2025-06-26 10:28:16 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:28:16 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159832, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:28:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:28:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:28:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:28:17 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:28:17 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:28:17 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:28:17 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:28:17 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:28:17 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:28:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:28:41 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:28:41 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:28:42 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:28:42 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:28:42 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.42s)[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:28:42 - PaddleOCR - [31mERROR[0m - [31mPaddleOCR模块未安装，请使用pip install paddleocr安装[0m
2025-06-26 10:28:42 - PaddleOCR - [31mERROR[0m - [31m初始化PaddleOCR失败: 需要先安装PaddleOCR: pip install paddleocr[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 54, in initialize
    from paddleocr import PaddleOCR
ModuleNotFoundError: No module named 'paddleocr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 57, in initialize
    raise ImportError("需要先安装PaddleOCR: pip install paddleocr")
ImportError: 需要先安装PaddleOCR: pip install paddleocr
2025-06-26 10:28:42 - CoreOCR - [31mERROR[0m - [31m无法初始化 PaddleOCR (japan)，OCR 步骤跳过。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.05s)[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:28:42 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:28:42 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:28:42 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:28:42 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:28:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:42 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:28:42 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:28:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.35s)[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:28:45 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:28:45 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:28:45 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.04s[0m
2025-06-26 10:28:47 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:28:47 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:28:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:28:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:28:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:28:48 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:28:48 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:28:48 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:28:48 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:28:48 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:28:48 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:30:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:30:32 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:30:32 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:30:33 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:30:33 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:30:33 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.46s)[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:30:33 - PaddleOCR - [31mERROR[0m - [31mPaddleOCR模块未安装，请使用pip install paddleocr安装[0m
2025-06-26 10:30:33 - PaddleOCR - [31mERROR[0m - [31m初始化PaddleOCR失败: 需要先安装PaddleOCR: pip install paddleocr[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 54, in initialize
    from paddleocr import PaddleOCR
ModuleNotFoundError: No module named 'paddleocr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 57, in initialize
    raise ImportError("需要先安装PaddleOCR: pip install paddleocr")
ImportError: 需要先安装PaddleOCR: pip install paddleocr
2025-06-26 10:30:33 - CoreOCR - [31mERROR[0m - [31m无法初始化 PaddleOCR (japan)，OCR 步骤跳过。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.06s)[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:30:33 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:30:33 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.01s)[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:30:33 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:30:33 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:30:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:33 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:30:33 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:30:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.29s)[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:30:36 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:30:36 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:30:36 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.03s[0m
2025-06-26 10:30:38 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:30:38 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159832, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:30:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:30:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:30:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:30:39 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:30:39 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:30:39 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:30:39 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:30:39 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:30:39 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:30:57 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:30:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:30:57 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:31:00 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:31:00 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:31:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:00 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:31:00 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:31:00 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:31:00 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:31:00 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:31:00 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:31:00 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:31:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:01 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:31:01 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:31:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:01 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:31:01 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:31:01 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:31:01 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:31:01 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:31:01 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:31:01 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:31:01 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:31:06 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功(使用默认路径)。耗时: 4.30 秒[0m
2025-06-26 10:31:06 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:31:15 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:31:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:15 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:31:18 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:31:18 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:31:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:18 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:31:18 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:31:18 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:31:18 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:31:18 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:31:18 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:31:18 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:31:19 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:31:19 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:31:19 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:31:19 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:31:19 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:31:19 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:31:19 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:31:19 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:31:19 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:31:19 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 10:31:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:31:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:31:19 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:31:19 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:31:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:31:19 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:31:19 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:31:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:31:19 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:31:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:27 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:31:35 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:31:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:31:46 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:31:46 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:31:46 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:31:46 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:31:47 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:31:47 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:31:47 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.51s)[0m
2025-06-26 10:31:47 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:31:48 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:31:48 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:32:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:32:12 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:32:12 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:32:13 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:32:13 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:32:13 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.56s)[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:32:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:13 - PaddleOCR - [32mINFO[0m - [32m使用模型目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\models\paddle_ocr[0m
2025-06-26 10:32:13 - PaddleOCR - [31mERROR[0m - [31mPaddleOCR模块未安装，请使用pip install paddleocr安装[0m
2025-06-26 10:32:13 - PaddleOCR - [31mERROR[0m - [31m初始化PaddleOCR失败: 需要先安装PaddleOCR: pip install paddleocr[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 54, in initialize
    from paddleocr import PaddleOCR
ModuleNotFoundError: No module named 'paddleocr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\paddle_ocr_interface.py", line 57, in initialize
    raise ImportError("需要先安装PaddleOCR: pip install paddleocr")
ImportError: 需要先安装PaddleOCR: pip install paddleocr
2025-06-26 10:32:13 - CoreOCR - [31mERROR[0m - [31m无法初始化 PaddleOCR (japan)，OCR 步骤跳过。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.05s)[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:32:13 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:32:13 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:32:13 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:32:13 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:32:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:13 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:32:13 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:32:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.32s)[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:32:16 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:32:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:16 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 10:32:16 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:32:16 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.17s[0m
2025-06-26 10:32:18 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:32:18 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:32:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:32:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:32:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:32:19 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:32:19 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:32:19 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:32:19 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:32:19 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:32:19 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:33:53 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:33:53 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:33:53 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:33:53 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:33:53 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:33:53 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:33:53 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:33:53 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:33:53 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.40s)[0m
2025-06-26 10:33:53 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:33:54 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:33:54 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:33:54 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:33:54 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:33:54 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:33:54 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:33:54 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:33:54 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:33:54 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:33:54 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:33:54 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:33:54 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:33:54 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:33:54 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:33:54 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:33:54 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.61s)[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:33:56 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:33:56 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:33:56 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.33s[0m
2025-06-26 10:33:59 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:33:59 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:34:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:34:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:34:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:34:00 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:34:00 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:34:00 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:34:00 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:34:00 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:34:00 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:37:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:37:52 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:37:52 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:37:52 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:37:52 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:37:52 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:37:52 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:37:52 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:37:52 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.47s)[0m
2025-06-26 10:37:52 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:37:53 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:37:53 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:37:53 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:37:53 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:37:53 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:37:53 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:37:53 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:37:53 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:37:53 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:37:53 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:37:53 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:37:53 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:37:53 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:53 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:37:53 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:37:53 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.67s)[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:37:55 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:37:55 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:37:55 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.46s[0m
2025-06-26 10:37:58 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:37:58 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159832, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:37:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:37:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:37:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:37:59 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:37:59 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:37:59 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:37:59 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:37:59 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:37:59 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:42:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:42:21 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:42:21 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:42:21 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:42:21 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:42:22 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:42:22 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:42:22 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.42s)[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:42:22 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:42:22 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:42:22 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:42:22 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:42:22 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file[0m
2025-06-26 10:42:22 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:42:22 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    resolved_files = [
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 471, in <listcomp>
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 134, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 359, in get_image_processor_dict
    raise OSError(
OSError: Can't load image processor for 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model' is the correct path to a directory containing a preprocessor_config.json file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:42:22 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.07s)[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:42:22 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:42:22 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:42:22 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:42:22 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:42:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:22 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:42:22 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:42:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.31s)[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:42:24 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:42:24 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:42:24 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.04s[0m
2025-06-26 10:42:27 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:42:27 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:42:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:42:27 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:42:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:42:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:42:28 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:42:28 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:42:28 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:42:28 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:42:28 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:42:28 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:47:20 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:47:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:20 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:47:23 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:47:23 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:47:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:23 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:47:23 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:47:23 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:47:23 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:47:23 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:47:23 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:47:23 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:47:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:24 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:47:24 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:47:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:25 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:47:25 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:47:25 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:47:25 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:47:25 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:47:25 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:47:25 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Error no file named pytorch_model.bin, model.safetensors, tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model.[0m
2025-06-26 10:47:25 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:47:31 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功(使用默认路径)。耗时: 5.98 秒[0m
2025-06-26 10:47:31 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:47:38 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:47:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:38 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:47:41 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:47:41 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:47:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:47:41 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:47:41 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:47:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:47:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:47:41 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:47:41 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:47:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:42 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:47:42 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:47:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:43 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:47:43 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:47:43 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:47:43 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:47:43 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:47:43 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:47:43 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Error no file named pytorch_model.bin, model.safetensors, tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model.[0m
2025-06-26 10:47:43 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:47:43 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 19, in __init__
    self.model = MangaOcrModel.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\models\vision_encoder_decoder\modeling_vision_encoder_decoder.py", line 370, in from_pretrained
    return super().from_pretrained(pretrained_model_name_or_path, *model_args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 4260, in from_pretrained
    checkpoint_files, sharded_metadata = _get_resolved_checkpoint_files(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 952, in _get_resolved_checkpoint_files
    raise EnvironmentError(
OSError: Error no file named pytorch_model.bin, model.safetensors, tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:47:43 - MangaOCRInterface - [31mERROR[0m - [31m❌ MangaOCR 模型预加载失败。[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 10:47:43 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 10:47:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:50 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:47:51 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:47:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:47:59 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:47:59 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:47:59 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:47:59 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:48:00 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-26 10:48:00 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-26 10:48:00 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.60s)[0m
2025-06-26 10:48:00 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-26 10:48:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:48:01 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:48:20 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:48:20 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:48:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:48:20 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:48:21 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:48:21 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:48:21 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.61s)[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:48:21 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:48:21 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:48:21 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:48:21 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:48:21 - MangaOCRInterface - [31mERROR[0m - [31m使用本地路径加载模型失败: Error no file named pytorch_model.bin, model.safetensors, tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model.[0m
2025-06-26 10:48:21 - MangaOCRInterface - [32mINFO[0m - [32m尝试使用默认路径加载模型...[0m
2025-06-26 10:48:21 - MangaOCRInterface - [31mERROR[0m - [31m初始化 MangaOCR 实例失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.[0m
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 99, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 19, in __init__
    self.model = MangaOcrModel.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\models\vision_encoder_decoder\modeling_vision_encoder_decoder.py", line 370, in from_pretrained
    return super().from_pretrained(pretrained_model_name_or_path, *model_args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 4260, in from_pretrained
    checkpoint_files, sharded_metadata = _get_resolved_checkpoint_files(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\modeling_utils.py", line 952, in _get_resolved_checkpoint_files
    raise EnvironmentError(
OSError: Error no file named pytorch_model.bin, model.safetensors, tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\..\..\manga_ocr_model.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 424, in cached_files
    hf_hub_download(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\utils\_validators.py", line 114, in _inner_fn
    return fn(*args, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 961, in hf_hub_download
    return _hf_hub_download_to_cache_dir(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1068, in _hf_hub_download_to_cache_dir
    _raise_on_head_call_error(head_call_error, force_download, local_files_only)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\huggingface_hub\file_download.py", line 1587, in _raise_on_head_call_error
    raise LocalEntryNotFoundError(
huggingface_hub.errors.LocalEntryNotFoundError: Cannot find the requested files in the disk cache and outgoing traffic has been disabled. To enable hf.co look-ups and downloads online, set 'local_files_only' to False.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\interfaces\manga_ocr_interface.py", line 109, in get_manga_ocr_instance
    _manga_ocr_instance = manga_ocr.MangaOcr(force_cpu=force_cpu)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\manga_ocr\ocr.py", line 17, in __init__
    self.processor = ViTImageProcessor.from_pretrained(pretrained_model_name_or_path)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 208, in from_pretrained
    image_processor_dict, kwargs = cls.get_image_processor_dict(pretrained_model_name_or_path, **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\image_processing_base.py", line 340, in get_image_processor_dict
    resolved_image_processor_file = cached_file(
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 266, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
  File "D:\Software\IDE\Anaconda\envs\pytorch\lib\site-packages\transformers\utils\hub.py", line 491, in cached_files
    raise OSError(
OSError: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Checkout your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-06-26 10:48:21 - CoreOCR - [31mERROR[0m - [31m无法初始化 MangaOCR，OCR 步骤跳过。[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.08s)[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:48:21 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:48:21 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 0.00s)[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:48:21 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:48:21 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:48:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:21 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:48:21 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:48:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.33s)[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:48:23 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:48:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:23 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 10:48:23 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:48:23 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 3.25s[0m
2025-06-26 10:48:26 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:48:26 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:48:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:48:26 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:48:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:48:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:48:27 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:48:27 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:48:27 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:48:27 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:48:27 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:48:27 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:51:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:51:56 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:51:56 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:51:56 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:51:56 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:51:56 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:51:56 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:51:56 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:51:56 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.42s)[0m
2025-06-26 10:51:56 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:51:56 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:51:56 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:51:56 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:51:56 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:51:58 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.23 秒[0m
2025-06-26 10:51:58 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 10:51:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:51:58 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 10:51:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:51:58 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 10:51:58 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 1.93s)[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 10:51:58 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:51:58 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:51:58 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 10:52:14 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '为了不让管家发现，准备到这一步真的很不容易......'[0m
2025-06-26 10:52:14 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 10:52:19 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食...'[0m
2025-06-26 10:52:19 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '为了不让管家发现，准备到这一步真的很不容易...'[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食谱！'[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.71s)[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:52:19 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:52:19 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:52:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:52:19 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:52:19 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:52:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.30s)[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:52:21 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:52:21 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:52:21 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 25.61s[0m
2025-06-26 10:52:24 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:52:24 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159440, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:52:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:52:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:52:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:52:25 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:52:25 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:52:25 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:52:25 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:52:25 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:52:25 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:52:49 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:54:28 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:54:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:28 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:54:31 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:54:31 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:54:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:31 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:54:31 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:54:31 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:54:31 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:54:31 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:54:31 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:54:31 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:54:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:32 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:54:32 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:54:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:54:32 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:54:32 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:54:32 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:54:32 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:54:32 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:54:32 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:54:32 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:54:33 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.22 秒[0m
2025-06-26 10:54:33 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:54:56 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:58:09 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:58:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:09 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:58:12 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:58:12 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:58:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:12 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:58:12 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:58:12 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:58:12 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:58:12 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:58:12 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:58:12 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:58:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:13 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:58:13 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:58:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:13 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:58:13 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:58:13 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:58:13 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:58:13 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:58:13 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:58:13 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:58:15 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.41 秒[0m
2025-06-26 10:58:15 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"source_language": "japan", "fontSize": "25", "autoFontSize": false, "api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "fontFamily": "fonts/msyh.ttc", "textDirection": "vertical", "prompt_content": "你是一个好用的翻译助手。请将我的非中文语句段落连成一句或几句话并翻译成中文，我发给你所有的话都是需要翻译的内容，你只需要回答翻译结果。特别注意：翻译结果字数不能超过原文字数！翻译结果请符合中文的语言习惯。", "use_textbox_prompt": false, "textbox_prompt_content": "你是一个专业的外语老师。请将我提供的非中文内容连成一句或几句话并翻译成中文。同时要告诉我为什么这么翻译，这句话有哪些知识点。", "use_inpainting": false, "use_lama": false, "blend_edges": true, "inpainting_strength": 1, "fill_color": "#ffffff", "text_color": "#231816", "rotation_angle": 0, "skip_ocr": false, "skip_translation": false, "bubble_coords": null, "ocr_engine": "manga_ocr", "baidu_ocr_api_key": null, "baidu_ocr_secret_key": null, "baidu_ocr_version": null, "ai_vision_provider": null, "ai_vision_api_key": null, "ai_vision_model_name": null, "ai_vision_ocr_prompt": null, "enableTextStroke": true, "textStrokeColor": "#ffffff", "textStrokeWidth": 3, "rpm_limit_translation": 0, "rpm_limit_ai_vision_ocr": 0, "use_json_format_translation": false, "use_json_format_ai_vision_ocr": false}[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 10:58:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 10:58:19 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 10:58:19 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 10:58:19 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 10:58:19 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 10:58:20 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 10:58:20 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 10:58:20 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 10:58:20 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.54s)[0m
2025-06-26 10:58:20 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 10:58:20 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 10:58:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:20 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 10:58:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:21 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 10:58:21 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.77s)[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 10:58:21 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 10:58:21 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 10:58:21 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 10:58:25 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '为了不让管家发现，准备到这一步真的很辛苦......'[0m
2025-06-26 10:58:25 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 10:58:30 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食...'[0m
2025-06-26 10:58:30 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '为了不让管家发现，准备到这一步真的很辛苦...'[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食谱！'[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.35s)[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 10:58:30 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 10:58:30 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 10:58:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:30 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 10:58:30 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 10:58:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.26s)[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 10:58:32 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:58:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:32 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 10:58:32 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 10:58:32 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.16s[0m
2025-06-26 10:58:35 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:58:35 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159832, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 10:58:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 10:58:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:58:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 10:58:36 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 10:58:36 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 10:58:36 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 10:58:36 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 10:58:36 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 10:58:36 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 10:59:38 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 10:59:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:38 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 10:59:41 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 10:59:41 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 10:59:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 10:59:41 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 10:59:41 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 10:59:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 10:59:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 10:59:41 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 10:59:41 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 10:59:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:42 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 10:59:42 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 10:59:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 10:59:43 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:59:43 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 10:59:43 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 10:59:43 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 10:59:43 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 10:59:43 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 10:59:43 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 10:59:44 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.20 秒[0m
2025-06-26 10:59:44 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"target_language": "zh", "source_language": "", "fontSize": 16, "autoFontSize": true, "api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "fontFamily": "", "textDirection": "vertical", "prompt_content": "", "use_textbox_prompt": false, "textbox_prompt_content": "", "use_inpainting": false, "blend_edges": false, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "fill_color": "#ffffff", "text_color": "#000000", "rotation_angle": 0, "ocr_engine": "", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "", "ai_vision_provider": "", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "custom_base_url": "", "use_json_format_translation": false, "use_json_format_ai_vision_ocr": false, "rpm_limit_translation": 0, "rpm_limit_ai_vision_ocr": 0, "enableTextStroke": false, "textStrokeColor": "#000000", "textStrokeWidth": 2, "bubble_coords": []}[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:03:22 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:07:43 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"source_language": "japan", "fontSize": "25", "autoFontSize": false, "api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "fontFamily": "fonts/msyh.ttc", "textDirection": "vertical", "prompt_content": "你是一个好用的翻译助手。请将我的非中文语句段落连成一句或几句话并翻译成中文，我发给你所有的话都是需要翻译的内容，你只需要回答翻译结果。特别注意：翻译结果字数不能超过原文字数！翻译结果请符合中文的语言习惯。", "use_textbox_prompt": false, "textbox_prompt_content": "你是一个专业的外语老师。请将我提供的非中文内容连成一句或几句话并翻译成中文。同时要告诉我为什么这么翻译，这句话有哪些知识点。", "use_inpainting": false, "use_lama": false, "blend_edges": true, "inpainting_strength": 1, "fill_color": "#ffffff", "text_color": "#231816", "rotation_angle": 0, "skip_ocr": false, "skip_translation": false, "bubble_coords": null, "ocr_engine": "manga_ocr", "baidu_ocr_api_key": null, "baidu_ocr_secret_key": null, "baidu_ocr_version": null, "ai_vision_provider": null, "ai_vision_api_key": null, "ai_vision_model_name": null, "ai_vision_ocr_prompt": null, "enableTextStroke": true, "textStrokeColor": "#ffffff", "textStrokeWidth": 3, "rpm_limit_translation": 0, "rpm_limit_ai_vision_ocr": 0, "use_json_format_translation": false, "use_json_format_ai_vision_ocr": false}[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:15:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:15:21 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:15:21 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-26 11:15:22 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:15:22 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:15:22 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:15:22 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:15:22 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:15:22 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.57s)[0m
2025-06-26 11:15:22 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:15:22 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:15:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:23 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:15:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:23 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:15:23 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.67s)[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:15:23 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:15:23 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:15:23 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:15:27 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '为了不让管家发现，准备到这一步真的很不容易......'[0m
2025-06-26 11:15:27 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:15:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食...'[0m
2025-06-26 11:15:32 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '为了不让管家发现，准备到这一步真的很不容易...'[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '为了今天，我不仅准备了最好的食材，还收集了连我都能做的完美食谱！'[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 8.68s)[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:15:32 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:15:32 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:15:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:32 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:15:32 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:15:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.17s)[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:15:34 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:15:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:34 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-26 11:15:34 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:15:34 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 12.33s[0m
2025-06-26 11:15:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 11:15:36 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m重渲染描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m重新渲染参数: fontSize_str=25, autoFontSize=False, textDirection=vertical, translated_text=长度: 2, bubble_coords=长度: 2, is_font_style_change=True[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m传入的干净图片数据: 长度: 11159832, 使用智能修复: False, 使用LAMA修复: False[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m所有气泡样式数据: 长度: 2[0m
2025-06-26 11:15:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m使用消除文字后的干净图片进行重新渲染[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m成功加载干净图片，尺寸: 3066x4096[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m已标记干净图片属性，将跳过修复步骤[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m提取全局文字颜色设置: #231816, 旋转角度: 0[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m收到前端传递的所有气泡样式，共 2 个[0m
2025-06-26 11:15:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m保存气泡 0 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 11:15:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m保存气泡 1 的样式: 字号=25, 自动字号=False, 字体=C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 方向=vertical, 颜色=#231816, 旋转=0[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m已将所有气泡样式保存到图像对象, 共 2 个[0m
2025-06-26 11:15:37 - TranslateAPI - [32mINFO[0m - [32m前端请求强制使用单个气泡样式，将优先使用各气泡的独立设置[0m
2025-06-26 11:15:37 - CoreRendering - [32mINFO[0m - [32m开始重新渲染，字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc, 大小: 25, 方向: vertical[0m
2025-06-26 11:15:37 - CoreRendering - [32mINFO[0m - [32m重渲染：使用 _clean_image 作为基础。[0m
2025-06-26 11:15:37 - CoreRendering - [32mINFO[0m - [32m使用图像预定义的气泡样式，共 2 个[0m
2025-06-26 11:15:37 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:15:37 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:17:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:17:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:17:48 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:17:48 - TranslateAPI - [31mERROR[0m - [31m图像数据解码失败: Incorrect padding[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:26:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:26:06 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:26:06 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:26:06 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:26:06 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:26:07 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:26:07 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:26:07 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.52s)[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:26:07 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:26:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:07 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:26:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:07 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:26:07 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.74s)[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:26:07 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:26:07 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:26:07 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:26:23 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:26:23 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:26:28 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:26:28 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种地步真的很辛苦..."'[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的食材和连我都能做的食谱都准备齐全了哦！"'[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.03s)[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:26:28 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:26:29 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:26:29 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:29 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:26:29 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:26:29 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.25s)[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-26 11:26:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:26:31 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:26:31 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.80s[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:27:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:27:25 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:27:25 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:27:25 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:27:25 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:27:26 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:27:26 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:27:26 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.49s)[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:27:26 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:27:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:26 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:27:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:26 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:27:26 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.68s)[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:27:26 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:27:26 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:27:26 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:27:31 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:27:31 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:27:37 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:27:37 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全了！"'[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 10.65s)[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:27:37 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:27:37 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:27:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:37 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:27:37 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:27:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.23s)[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:27:39 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:27:39 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:27:39 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:27:39 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:27:39 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.28s[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:32:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:32:24 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:32:24 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:32:24 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:32:24 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:32:24 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:32:24 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:32:24 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:32:24 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.44s)[0m
2025-06-26 11:32:24 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:32:24 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:32:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:25 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:32:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:25 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:32:25 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.65s)[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:32:25 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:32:25 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:32:25 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:32:41 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:32:41 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:32:46 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:32:46 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，还收集了连我都能做的完美食谱呢！"'[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.16s)[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:32:46 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:32:46 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:32:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:46 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:32:46 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:32:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.70s)[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:32:49 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:32:49 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:32:49 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:32:49 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:32:49 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 25.18s[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:35:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:35:16 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:35:16 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:35:17 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:35:17 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:35:17 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:35:17 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:35:17 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:35:17 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.57s)[0m
2025-06-26 11:35:17 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:35:17 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:35:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:17 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:35:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:18 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:35:18 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.64s)[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:35:18 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:35:18 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:35:18 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:35:34 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:35:34 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:35:38 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:35:38 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.69s)[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:35:38 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:35:38 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:35:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:39 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:35:39 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:35:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.48s)[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:35:41 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:35:41 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:35:41 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:35:41 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:35:41 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.64s[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:37:16 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:37:16 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:37:16 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:37:16 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:37:16 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:37:16 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:37:16 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:37:16 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.48s)[0m
2025-06-26 11:37:16 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:37:16 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:17 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:37:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:17 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:37:17 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.66s)[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:37:17 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:37:17 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:37:17 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:37:33 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:37:33 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:37:38 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:37:38 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种地步真的很不容易..."'[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我都能做的食谱！"'[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.83s)[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:37:38 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:37:38 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:37:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:38 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:37:38 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:37:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.18s)[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:37:40 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:37:40 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:37:40 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:37:40 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:37:40 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.39s[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 11:39:58 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 11:39:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:39:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:39:58 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 11:40:02 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 11:40:02 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 11:40:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 11:40:02 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 11:40:02 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 11:40:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 11:40:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 11:40:02 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 11:40:02 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 11:40:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:04 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 11:40:04 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 11:40:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:04 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:40:04 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 11:40:04 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 11:40:04 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 11:40:04 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 11:40:04 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 11:40:04 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 11:40:06 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.81 秒[0m
2025-06-26 11:40:06 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 11:40:11 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 11:40:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:11 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 11:40:14 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 11:40:14 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 11:40:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:14 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 11:40:14 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 11:40:14 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 11:40:14 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 11:40:14 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 11:40:14 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 11:40:14 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 11:40:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:15 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 11:40:15 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 11:40:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:40:15 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:40:15 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 11:40:15 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 11:40:15 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 11:40:15 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 11:40:15 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 11:40:15 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 11:40:16 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.20 秒[0m
2025-06-26 11:40:16 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:41:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:41:30 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:41:30 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:41:31 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:41:31 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:41:31 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:41:31 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:41:31 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:41:31 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.48s)[0m
2025-06-26 11:41:31 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:41:31 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:41:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:31 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:41:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:32 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:41:32 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.69s)[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:41:32 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:41:32 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:41:32 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:41:37 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:41:37 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:41:42 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:41:42 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现，准备到这一步真的很不容易..."'[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全了！"'[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 10.44s)[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:41:42 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:41:42 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:41:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:42 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:41:42 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:41:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-26 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:41:44 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:41:44 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.12s[0m
2025-06-26 11:41:47 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 11:44:18 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 11:44:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:18 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 11:44:21 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 11:44:21 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 11:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:21 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 11:44:21 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 11:44:21 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 11:44:21 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 11:44:21 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 11:44:21 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 11:44:21 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 11:44:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:22 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 11:44:23 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 11:44:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:23 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:44:23 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 11:44:23 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 11:44:23 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 11:44:23 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 11:44:23 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 11:44:23 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 11:44:24 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.31 秒[0m
2025-06-26 11:44:24 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 11:44:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 11:44:55 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 11:44:55 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 11:44:55 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 11:44:55 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 11:44:56 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 11:44:56 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 11:44:56 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 11:44:56 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.56s)[0m
2025-06-26 11:44:56 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 11:44:56 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 11:44:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:56 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:44:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:44:57 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:44:57 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.71s)[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 11:44:57 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 11:44:57 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 11:44:57 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:45:13 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:45:13 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 11:45:18 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 11:45:18 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很不容易..."'[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的材料，还收集了连我都能做的完美食谱呢！"'[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.08s)[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 11:45:18 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 11:45:18 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 11:45:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:18 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 11:45:18 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 11:45:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.29s)[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-26 11:45:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 11:45:20 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 11:45:20 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.87s[0m
2025-06-26 11:45:22 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 13:44:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 13:44:33 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 13:44:33 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 13:44:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 13:44:34 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 13:44:34 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 13:44:34 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 13:44:34 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 13:44:34 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.52s)[0m
2025-06-26 13:44:34 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 13:44:34 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 13:44:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:35 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:44:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:35 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:44:35 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.69s)[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:44:35 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 13:44:35 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 13:44:35 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 13:44:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 13:44:38 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 13:44:38 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 13:44:38 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 13:44:38 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 13:44:39 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 1 个候选框 (阈值: 0.6)[0m
2025-06-26 13:44:39 - CoreDetection - [32mINFO[0m - [32m检测到 1 个气泡候选框。[0m
2025-06-26 13:44:39 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 1 个有效气泡坐标。[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 1 个气泡 (耗时: 0.53s)[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 13:44:39 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 1 个气泡...[0m
2025-06-26 13:44:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:39 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:44:39 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.41s)[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 1[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:44:39 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 13:44:39 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 1 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 13:44:39 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:44:39 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:44:39 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:44:45 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:44:45 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备好了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.62s)[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 13:44:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 13:44:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:45 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:44:45 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 1[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 5.42s)[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 13:44:45 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：1[0m
2025-06-26 13:44:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 13:44:45 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 13:44:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.59s)[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.70s[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.64s)[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m开始渲染 1 个气泡的文本...[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:44:47 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 13:44:47 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 9.24s[0m
2025-06-26 13:44:50 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 13:44:50 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 13:47:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 13:47:45 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 13:47:45 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 13:47:45 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 13:47:45 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 13:47:45 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 13:47:45 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 13:47:45 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 13:47:45 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.29s)[0m
2025-06-26 13:47:45 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 13:47:45 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 13:47:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:46 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:47:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:46 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:47:46 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.73s)[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:47:46 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 13:47:46 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 13:47:46 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 13:47:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 13:47:49 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 13:47:49 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 13:47:49 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 13:47:49 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 13:47:49 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 13:47:49 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 13:47:49 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 13:47:49 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.54s)[0m
2025-06-26 13:47:49 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 13:47:49 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 13:47:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:50 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:47:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:47:50 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:47:50 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.82s)[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 13:47:50 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 13:47:50 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 13:47:50 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:48:02 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:48:02 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:48:02 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:48:02 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 13:48:07 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:48:07 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦啊..."'[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集好了！"'[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.58s)[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 13:48:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 13:48:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:48:07 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 13:48:07 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的材料，连我都能做的食谱也全都收集好了哦！"'[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 16.77s)[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 13:48:07 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 13:48:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 13:48:07 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 13:48:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.64s)[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 13:48:09 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 13:48:09 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:48:09 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:48:09 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 13:48:09 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.50s[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.64s)[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 13:48:10 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 13:48:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:48:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 13:48:10 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.04s)[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 13:48:10 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 21.07s[0m
2025-06-26 13:48:12 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 13:48:12 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 14:23:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 14:23:20 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 14:23:20 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 14:23:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 14:23:20 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 14:23:21 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-26 14:23:21 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-26 14:23:21 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.56s)[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 14:23:21 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-26 14:23:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:21 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 14:23:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:21 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 14:23:21 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.71s)[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-26 14:23:21 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 14:23:21 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 14:23:21 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-26 14:23:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-26 14:23:25 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-26 14:23:25 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-26 14:23:25 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-26 14:23:25 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-26 14:23:25 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 1 个候选框 (阈值: 0.6)[0m
2025-06-26 14:23:25 - CoreDetection - [32mINFO[0m - [32m检测到 1 个气泡候选框。[0m
2025-06-26 14:23:25 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 1 个有效气泡坐标。[0m
2025-06-26 14:23:25 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 1 个气泡 (耗时: 0.44s)[0m
2025-06-26 14:23:25 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-26 14:23:25 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 1 个气泡...[0m
2025-06-26 14:23:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:26 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 14:23:26 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.39s)[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 1[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-26 14:23:26 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-26 14:23:26 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 1 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-26 14:23:26 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 14:23:26 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 14:23:26 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-26 14:23:31 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 14:23:31 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 1[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 5.39s)[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 14:23:31 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 14:23:31 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：1[0m
2025-06-26 14:23:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:31 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 14:23:31 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 14:23:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-26 14:23:32 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的材料和我都能做的食谱！"'[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 10.37s)[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-26 14:23:32 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-26 14:23:32 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-26 14:23:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:32 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-26 14:23:32 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-26 14:23:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.75s)[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m开始渲染 1 个气泡的文本...[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 9.21s[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.63s)[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-26 14:23:34 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-26 14:23:34 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.56s[0m
2025-06-26 14:23:36 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 14:23:37 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 22:01:36 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 22:01:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:36 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 22:01:41 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 22:01:41 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 22:01:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 22:01:41 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 22:01:41 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 22:01:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 22:01:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 22:01:41 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 22:01:41 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 22:01:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:44 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 22:01:44 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 22:01:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:44 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 22:01:44 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 22:01:44 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 22:01:44 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 22:01:44 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 22:01:44 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 22:01:44 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 22:01:46 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 2.12 秒[0m
2025-06-26 22:01:46 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 22:01:58 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 22:01:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:01:58 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 22:02:02 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 22:02:02 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 22:02:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 22:02:02 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 22:02:02 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 22:02:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 22:02:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 22:02:02 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 22:02:02 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 22:02:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:03 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 22:02:04 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:04 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 22:02:04 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 22:02:04 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 22:02:04 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 22:02:04 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 22:02:04 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 22:02:04 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 22:02:04 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 22:02:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 22:02:06 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 2.00 秒[0m
2025-06-26 22:02:06 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 23:17:59 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 23:17:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:17:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:17:59 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 23:18:03 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 23:18:03 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 23:18:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:03 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 23:18:03 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 23:18:03 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 23:18:03 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 23:18:03 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 23:18:03 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 23:18:03 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 23:18:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:05 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 23:18:05 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 23:18:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:06 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 23:18:06 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 23:18:06 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 23:18:06 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 23:18:06 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 23:18:06 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 23:18:06 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 23:18:07 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.87 秒[0m
2025-06-26 23:18:07 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-26 23:18:19 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-26 23:18:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:19 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-26 23:18:23 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-26 23:18:23 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-26 23:18:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:23 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\shixi\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-26 23:18:23 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-26 23:18:23 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-26 23:18:23 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-26 23:18:23 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-26 23:18:23 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-26 23:18:23 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-26 23:18:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:24 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-26 23:18:24 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-26 23:18:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:24 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 23:18:24 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-26 23:18:24 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-26 23:18:24 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-26 23:18:24 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-26 23:18:24 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-26 23:18:24 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-26 23:18:24 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 23:18:24 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 23:18:24 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 23:18:24 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 23:18:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:25 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 23:18:25 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 23:18:25 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 23:18:25 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 23:18:25 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-26 23:18:25 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-26 23:18:25 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\shixi\Saber-Translator\Saber-Translator-main[0m
2025-06-26 23:18:26 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.94 秒[0m
2025-06-26 23:18:26 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
