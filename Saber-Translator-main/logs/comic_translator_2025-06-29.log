2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 09:43:52 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 09:43:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:43:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:43:52 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 09:43:58 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 09:43:58 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 09:43:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:43:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:43:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:43:58 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 09:43:58 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 09:43:58 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 09:43:58 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 09:43:58 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 09:43:58 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 09:43:58 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 09:44:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:00 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 09:44:00 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 09:44:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:01 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:44:01 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 09:44:01 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 09:44:01 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 09:44:01 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 09:44:01 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 09:44:01 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 09:44:03 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 2.11 秒[0m
2025-06-29 09:44:03 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 09:44:15 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 09:44:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:15 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 09:44:19 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 09:44:19 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 09:44:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 09:44:19 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 09:44:19 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 09:44:19 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 09:44:19 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 09:44:19 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 09:44:19 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 09:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:21 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 09:44:21 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 09:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:21 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:44:21 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 09:44:21 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 09:44:21 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 09:44:21 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 09:44:21 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 09:44:21 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 09:44:24 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 2.26 秒[0m
2025-06-29 09:44:24 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 09:44:26 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 09:44:26 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 09:44:26 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 09:44:26 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 09:44:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:44:49 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 09:44:49 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'The Impact of Artificial Intel...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:45:12 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'The Impact of Artificial Intel...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 09:45:12 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 09:45:19 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 09:45:19 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'The Impact of Artificial Intel...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:45:48 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'The Impact of Artificial Intel...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 09:45:48 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 09:45:52 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 09:45:52 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'The Impact of Artificial Intel...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:46:11 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'The Impact of Artificial Intel...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 09:46:11 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 09:46:52 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 09:46:52 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '
Artificial Intelligence (AI) ...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:46:57 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '
Artificial Intelligence (AI) ...' -> '"detected": "en",
"translation...'[0m
2025-06-29 09:46:57 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 09:47:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:47:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 09:47:56 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 09:47:56 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 09:47:56 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 09:47:56 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 09:47:57 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 09:47:57 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 09:47:57 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 09:47:57 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.70s)[0m
2025-06-29 09:47:57 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 09:47:57 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 09:47:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:47:57 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 09:47:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:47:58 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 09:47:58 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.77s)[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 09:47:58 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 09:47:58 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 09:47:58 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:48:14 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 09:48:14 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:48:18 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 09:48:18 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很不容易..."'[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.16s)[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 09:48:18 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 09:48:18 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 09:48:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:18 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 09:48:18 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 09:48:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.56s)[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-29 09:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 09:48:20 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 09:48:20 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.45s[0m
2025-06-29 09:48:23 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 09:49:09 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 09:49:09 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '维度的多少方面，所以你要的是。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 09:49:28 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '维度的多少方面，所以你要的是。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 09:49:28 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 09:56:46 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 09:56:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:46 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 09:56:50 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 09:56:50 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 09:56:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:50 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 09:56:50 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 09:56:50 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 09:56:50 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 09:56:50 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 09:56:50 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 09:56:50 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 09:56:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:52 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 09:56:52 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 09:56:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:56:52 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:56:52 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 09:56:52 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 09:56:52 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 09:56:52 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 09:56:52 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 09:56:52 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 09:56:54 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.67 秒[0m
2025-06-29 09:56:54 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 09:57:05 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 09:57:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:05 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 09:57:08 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 09:57:08 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 09:57:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:08 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 09:57:08 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 09:57:08 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 09:57:08 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 09:57:08 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 09:57:08 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 09:57:08 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 09:57:10 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:10 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 09:57:10 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 09:57:10 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:10 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 09:57:10 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:57:10 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 09:57:10 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 09:57:10 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 09:57:10 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 09:57:10 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 09:57:10 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 09:57:11 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.29 秒[0m
2025-06-29 09:57:11 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "", "model_name": "", "model_provider": "", "prompt_content": "", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#000000", "textStrokeWidth": 2, "ocr_engine": "", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "", "ai_vision_provider": "", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": false, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "", "custom_base_url": ""}[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 10:57:17 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "", "model_name": "", "model_provider": "", "prompt_content": "", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#000000", "textStrokeWidth": 2, "ocr_engine": "", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "", "ai_vision_provider": "", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": false, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "", "custom_base_url": ""}[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 10:57:45 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 10:58:22 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 10:58:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:22 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:22 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 10:58:26 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 10:58:26 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 10:58:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:26 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:26 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 10:58:26 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 10:58:26 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 10:58:26 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 10:58:26 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 10:58:26 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 10:58:26 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 10:58:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:28 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 10:58:28 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 10:58:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:28 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 10:58:28 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 10:58:28 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 10:58:28 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 10:58:28 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 10:58:28 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 10:58:28 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 10:58:30 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.64 秒[0m
2025-06-29 10:58:30 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 10:58:41 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 10:58:41 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 10:58:41 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 10:58:42 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 10:58:42 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 10:58:42 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 10:58:42 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 10:58:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:42 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 10:58:45 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 10:58:45 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 10:58:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:45 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:45 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 10:58:45 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 10:58:45 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 10:58:45 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 10:58:45 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 10:58:45 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 10:58:45 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 10:58:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:46 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 10:58:46 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 10:58:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 10:58:46 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 10:58:46 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 10:58:46 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 10:58:46 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 10:58:46 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 10:58:46 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 10:58:46 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "", "model_name": "", "model_provider": "", "prompt_content": "", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#000000", "textStrokeWidth": 2, "ocr_engine": "", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "", "ai_vision_provider": "", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": false, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "", "custom_base_url": ""}[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 10:58:47 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 10:58:48 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.48 秒[0m
2025-06-29 10:58:48 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "", "model_name": "", "model_provider": "", "prompt_content": "", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#000000", "textStrokeWidth": 2, "ocr_engine": "", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "", "ai_vision_provider": "", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": false, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "", "custom_base_url": ""}[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#000000, width=2[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:00:36 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:01:26 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:01:26 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:01:47 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> 'Absolutely! The rapid advancem...'[0m
2025-06-29 11:01:47 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:02:23 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:02:23 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:02:57 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> 'Absolutely! The rapid advancem...'[0m
2025-06-29 11:02:57 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:05:12 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:05:12 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:05:20 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 11:05:20 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:05:29 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:06:55 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:06:58 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:08:46 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:11:11 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:21:37 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:21:37 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:21:57 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 11:21:57 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:22:42 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:22:42 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:22:50 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 11:22:50 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "", "model_provider": "", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:22:58 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:26:35 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: , 字号: 16[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:27:01 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。请按以下格式输出:\"detected\": \"<原文语言代码>\",\"translation\": \"<翻译后的文本>\"", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "auto", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#000000", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 11:27:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:27:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 11:27:43 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 11:27:43 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 11:27:43 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 11:27:43 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 11:27:44 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 11:27:44 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 11:27:44 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 11:27:44 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.76s)[0m
2025-06-29 11:27:44 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 11:27:44 - CoreOCR - [32mINFO[0m - [32m源语言: ja, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-29 11:27:44 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 11:27:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:27:44 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:27:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:27:45 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:27:45 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.72s)[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:27:45 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 11:27:45 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 11:27:45 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:28:00 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '```json
{
  "detected": "ja",
...'[0m
2025-06-29 11:28:00 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:28:05 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '```json
{
  "detected": "ja",
...'[0m
2025-06-29 11:28:05 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '```json
{
  "detected": "ja",
  "translation": "为了不让管家发现，准备到这里真的很辛苦..."
}
```'[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '```json
{
  "detected": "ja",
  "translation": "I've gathered the best ingredients for today and even recipes that even I can make!"
}
```'[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.47s)[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 11:28:05 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 11:28:05 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 11:28:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:05 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 11:28:05 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 11:28:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.27s)[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-29 11:28:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 11:28:07 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.04s)[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 11:28:07 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.49s[0m
2025-06-29 11:28:09 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 11:36:09 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:36:09 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音翻译与识别。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:36:25 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音翻译与识别。...' -> '{
"detected": "zh",
"translati...'[0m
2025-06-29 11:36:25 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:36:29 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:36:29 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音翻译与识别。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:36:33 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音翻译与识别。...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-29 11:36:33 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 11:41:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:41:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 11:41:43 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 11:41:43 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 11:41:43 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 11:41:43 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 11:41:44 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 11:41:44 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 11:41:44 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.47s)[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 11:41:44 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:41:44 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:41:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:41:44 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:41:44 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.74s)[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:41:44 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 11:41:44 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 11:41:44 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:41:49 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 11:41:49 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:42:00 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 11:42:00 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不被管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我都能做的食谱啦！"'[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 15.34s)[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 11:42:00 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 11:42:00 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 11:42:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:42:00 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 11:42:00 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 11:42:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.63s)[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 11:42:02 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 11:42:02 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 11:42:02 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 11:42:02 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 11:42:02 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 19.42s[0m
2025-06-29 11:42:05 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 11:55:56 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 11:55:56 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:56:16 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 11:56:16 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 11:56:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:56:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 11:56:42 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 11:56:42 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 11:56:43 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 11:56:43 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 11:56:43 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 11:56:43 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 11:56:43 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 11:56:43 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.36s)[0m
2025-06-29 11:56:43 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 11:56:43 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 11:56:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:56:43 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:56:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 11:56:44 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:56:44 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.69s)[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 11:56:44 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 11:56:44 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 11:56:44 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 11:56:48 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 11:56:48 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 12:03:09 - openai._base_client - [32mINFO[0m - [32mRetrying request to /chat/completions in 0.383859 seconds[0m
2025-06-29 12:03:22 - openai._base_client - [32mINFO[0m - [32mRetrying request to /chat/completions in 0.905225 seconds[0m
2025-06-29 12:03:39 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 12:03:39 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我也能做的食谱！"'[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 415.06s)[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 12:03:39 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 12:03:39 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 12:03:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 12:03:39 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 12:03:39 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 12:03:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.58s)[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 12:03:41 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 12:03:41 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 12:03:41 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 12:03:41 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 12:03:41 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 418.94s[0m
2025-06-29 12:03:43 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 13:45:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:45:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 13:45:46 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 13:45:46 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 13:45:47 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 13:45:47 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 13:45:47 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 13:45:47 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 13:45:47 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 13:45:47 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.57s)[0m
2025-06-29 13:45:47 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 13:45:47 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 13:45:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:45:47 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 13:45:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:45:48 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 13:45:48 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.72s)[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 13:45:48 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 13:45:48 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 13:45:48 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 13:46:04 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 13:46:04 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 13:46:08 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 13:46:08 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种地步真的很辛苦..."'[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全了！"'[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.45s)[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 13:46:08 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 13:46:08 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 13:46:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:46:08 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 13:46:08 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 13:46:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.62s)[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 13:46:11 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 13:46:11 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 13:46:11 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 13:46:11 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 13:46:11 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.64s[0m
2025-06-29 13:46:14 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 13:49:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:49:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 13:49:51 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 13:49:51 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 13:49:51 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 13:49:51 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 13:49:51 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-29 13:49:51 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-29 13:49:51 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.44s)[0m
2025-06-29 13:49:51 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-29 13:49:53 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 14:02:06 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 14:02:06 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial Intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 14:02:25 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial Intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 14:02:25 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 14:02:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 14:02:35 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 14:02:35 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 14:02:35 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 14:02:35 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 14:02:36 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 14:02:36 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 14:02:36 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.47s)[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 14:02:36 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 14:02:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:36 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 14:02:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:36 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 14:02:36 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.75s)[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 14:02:36 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 14:02:36 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 14:02:36 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 14:02:51 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 14:02:51 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 14:02:56 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 14:02:56 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全了！"'[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 19.19s)[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 14:02:56 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 14:02:56 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 14:02:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:56 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 14:02:56 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 14:02:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.65s)[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 14:02:58 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 14:02:58 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 14:02:58 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 14:02:58 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 14:02:58 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 23.34s[0m
2025-06-29 14:03:01 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 14:03:41 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 14:03:41 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 14:03:45 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 14:03:45 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:00:54 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:00:54 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:01:05 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '"detected": "en",
"translation...'[0m
2025-06-29 15:01:05 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:01:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:01:14 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:01:14 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:01:14 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:01:14 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:01:15 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:01:15 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:01:15 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.60s)[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:01:15 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:01:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:15 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:01:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:15 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:01:15 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.68s)[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:01:15 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:01:15 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:01:15 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:01:30 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:01:30 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:01:35 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:01:35 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很辛苦..."'[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 19.73s)[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:01:35 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:01:35 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:01:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:35 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:01:35 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:01:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:01:37 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:01:37 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:01:37 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:01:37 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:01:37 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 23.51s[0m
2025-06-29 15:01:40 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:06:47 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:06:47 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:06:58 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 15:06:58 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:07:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:07:05 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:07:05 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:07:05 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:07:05 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:07:05 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:07:05 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:07:05 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:07:05 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.60s)[0m
2025-06-29 15:07:05 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:07:05 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:07:05 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:06 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:07:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:06 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:07:06 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.67s)[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:07:06 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:07:06 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:07:06 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:07:22 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:07:22 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:07:27 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:07:27 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.58s)[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:07:27 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:07:27 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:07:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:27 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:07:27 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:07:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:07:29 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:07:29 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:07:29 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:07:29 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:07:29 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.36s[0m
2025-06-29 15:07:31 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:08:26 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:08:26 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别和翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:08:29 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:08:29 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:08:30 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别和翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 15:08:30 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:08:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:08:39 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:08:39 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:08:39 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:08:39 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:08:40 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:08:40 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:08:40 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.60s)[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:08:40 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:08:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:40 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:08:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:40 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:08:40 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.67s)[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:08:40 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:08:40 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:08:40 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:08:45 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 15:08:45 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:08:45 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:08:45 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别和翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:08:46 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:08:46 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:08:50 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别和翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 15:08:50 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:08:52 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:08:52 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不被管家发现而准备到这种地步真的很辛苦..."'[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我不仅准备了最好的食材，还收集了连我都能轻松搞定的完美食谱哦！"'[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 11.26s)[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:08:52 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:08:52 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:08:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:52 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:08:52 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:08:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.14s)[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:08:54 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:08:54 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:08:54 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:08:54 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:08:54 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.92s[0m
2025-06-29 15:08:56 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:10:35 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:10:35 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:10:51 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 15:10:51 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:11:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:11:01 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:11:01 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:11:02 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:11:02 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:11:02 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:11:02 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:11:02 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:11:02 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.43s)[0m
2025-06-29 15:11:02 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:11:02 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:02 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:03 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:11:03 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.77s)[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:11:03 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:11:03 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:11:03 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:11:19 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:11:19 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:11:24 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:11:24 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是连最好的食材和连我都能做的食谱都准备齐全了！"
```'[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.06s)[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:11:24 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:11:24 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:11:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:24 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:11:24 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:11:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.25s)[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:11:26 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:11:26 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:11:26 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:11:26 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:11:26 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.75s[0m
2025-06-29 15:11:28 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:14:25 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:14:25 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:14:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:14:30 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:14:30 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:14:31 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:14:31 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:14:31 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:14:31 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:14:31 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:14:31 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.60s)[0m
2025-06-29 15:14:31 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:14:31 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:14:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:31 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:14:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:32 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:14:32 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.65s)[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:14:32 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:14:32 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:14:32 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:14:41 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:14:41 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:14:42 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:14:42 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:14:46 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:14:46 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不被管家发现而准备到这种地步真的很辛苦..."'[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材和连我都能做的完美食谱呢！"'[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 14.19s)[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:14:46 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:14:46 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:14:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:46 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:14:46 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:14:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:14:47 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 15:14:47 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:14:47 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-29 15:14:47 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:14:48 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:14:48 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:14:48 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:14:48 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:14:48 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 17.96s[0m
2025-06-29 15:14:50 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:15:06 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:15:06 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:15:22 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-29 15:15:22 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:31:37 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:31:37 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '手语翻译...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:31:43 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '手语翻译...' -> '```json
{
"detected": "ja",
"t...'[0m
2025-06-29 15:31:43 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:31:50 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:31:50 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '手语翻译...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:31:54 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '手语翻译...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-29 15:31:54 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:47:48 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:47:48 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:47:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:47:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:47:57 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:47:57 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:47:57 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:47:57 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:47:57 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:47:57 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:47:57 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:47:57 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.46s)[0m
2025-06-29 15:47:57 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:47:57 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:47:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:47:58 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:47:58 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:47:58 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:47:58 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.85s)[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:47:58 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:47:58 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:47:58 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:47:59 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 15:47:59 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 15:48:02 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 15:48:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 15:48:03 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 15:48:03 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 15:48:03 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 15:48:03 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 15:48:03 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:48:03 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:48:03 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 15:48:03 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 15:48:03 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 15:48:03 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.57s)[0m
2025-06-29 15:48:03 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 15:48:03 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 15:48:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:04 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:48:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:04 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:48:04 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.82s)[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 15:48:04 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 15:48:04 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 15:48:04 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:48:07 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:48:07 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我都能做的食谱！"'[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.18s)[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:48:07 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:48:08 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:48:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:08 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:48:08 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:48:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:08 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:48:08 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.30s)[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:48:10 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:48:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:48:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:48:10 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:48:10 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.03s[0m
2025-06-29 15:48:12 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:48:13 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 15:48:20 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材和连我都能做的完美食谱呢！"'[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 16.16s)[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 15:48:20 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 15:48:20 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 15:48:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:20 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 15:48:21 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 15:48:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.31s)[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 15:48:23 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 15:48:23 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:48:23 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 15:48:23 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 15:48:23 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 20.10s[0m
2025-06-29 15:48:25 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 15:48:35 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 15:48:35 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 15:48:49 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '{
"detected": "en",
"translati...'[0m
2025-06-29 15:48:49 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 16:46:20 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 16:46:20 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 16:46:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 16:46:28 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 16:46:28 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 16:46:28 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 16:46:28 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 16:46:29 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 16:46:29 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 16:46:29 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 16:46:29 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.80s)[0m
2025-06-29 16:46:29 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 16:46:29 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 16:46:29 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:30 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 16:46:30 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:30 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 16:46:30 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.77s)[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 16:46:30 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 16:46:30 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 16:46:30 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 16:46:31 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '"detected": "en",
"translation...'[0m
2025-06-29 16:46:31 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 16:46:34 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 16:46:34 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 16:46:39 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 16:46:39 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全啦！"'[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.55s)[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 16:46:39 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 16:46:39 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 16:46:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:40 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 16:46:40 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 16:46:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.34s)[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 16:46:42 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 16:46:42 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 16:46:42 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 16:46:42 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 16:46:42 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.72s[0m
2025-06-29 16:46:44 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 16:46:59 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 16:46:59 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 16:47:15 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 16:47:15 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 17:01:10 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 17:01:10 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 17:01:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:01:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 17:01:23 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 17:01:23 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 17:01:23 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 17:01:23 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 17:01:24 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 17:01:24 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 17:01:24 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 17:01:24 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.63s)[0m
2025-06-29 17:01:24 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 17:01:24 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 17:01:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:01:24 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:01:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:01:25 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:01:25 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.99s)[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:01:25 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 17:01:25 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 17:01:25 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:01:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 17:01:32 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 17:01:38 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 17:01:38 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Artificial intelligence (AI) i...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:01:50 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 17:01:50 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:01:54 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-29 17:01:54 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 17:02:06 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-29 17:02:06 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:07 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:07 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:10 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-29 17:02:10 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 17:02:12 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:12 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材和连我都能做的完美食谱呢！"'[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 47.41s)[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 17:02:12 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 17:02:12 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 17:02:12 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Artificial intelligence (AI) i...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-29 17:02:12 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-29 17:02:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:12 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 17:02:12 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 17:02:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.26s)[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 17:02:14 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 17:02:14 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:14 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:14 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 17:02:14 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 51.56s[0m
2025-06-29 17:02:16 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 17:02:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 17:02:27 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 17:02:27 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 17:02:27 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 17:02:27 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 17:02:28 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 17:02:28 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 17:02:28 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.37s)[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 17:02:28 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 17:02:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:28 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:02:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:28 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:02:28 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.79s)[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:02:28 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 17:02:28 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 17:02:28 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:33 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 17:02:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 17:02:33 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 17:02:33 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 17:02:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 17:02:33 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 17:02:34 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 17:02:34 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 17:02:34 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.50s)[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 17:02:34 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 17:02:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:34 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:02:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:34 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:02:34 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.85s)[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:02:34 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 17:02:34 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 17:02:34 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:38 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:38 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很辛苦..."'[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的材料和我都能做的食谱啦！"'[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.68s)[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 17:02:38 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 17:02:38 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 17:02:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:38 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 17:02:38 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 17:02:38 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:40 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:40 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.36s)[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 17:02:40 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 17:02:40 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:40 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:40 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 17:02:40 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.47s[0m
2025-06-29 17:02:43 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 17:02:46 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:02:52 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很辛苦..."'[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的材料，连我都能做的食谱也全都收集好了呢！"'[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 17.42s)[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 17:02:52 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 17:02:52 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 17:02:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:52 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 17:02:52 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 17:02:52 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.28s)[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 17:02:54 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 17:02:54 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:54 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:02:54 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 17:02:54 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 21.33s[0m
2025-06-29 17:02:56 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 17:10:37 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 17:10:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:37 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 17:10:41 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 17:10:41 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 17:10:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 17:10:41 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 17:10:41 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 17:10:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 17:10:41 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 17:10:41 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 17:10:41 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 17:10:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:43 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 17:10:44 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 17:10:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:44 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:44 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 17:10:44 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 17:10:44 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 17:10:44 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 17:10:44 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 17:10:44 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 17:10:44 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 17:10:45 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.80 秒[0m
2025-06-29 17:10:45 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-29 17:10:57 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-29 17:10:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:10:57 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-29 17:11:00 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-29 17:11:00 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-29 17:11:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:00 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-29 17:11:00 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-29 17:11:00 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-29 17:11:00 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-29 17:11:00 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-29 17:11:00 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-29 17:11:00 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-29 17:11:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:01 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-29 17:11:01 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-29 17:11:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:01 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 17:11:01 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-29 17:11:01 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-29 17:11:01 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-29 17:11:01 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-29 17:11:01 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-29 17:11:01 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-29 17:11:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:11:01 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:11:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:11:01 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:11:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:11:02 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:11:02 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:11:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:11:02 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:11:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:11:03 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.43 秒[0m
2025-06-29 17:11:03 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-29 17:11:13 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-29 17:11:13 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"source_language": "japan", "fontSize": "25", "autoFontSize": false, "api_key": "", "model_name": "", "model_provider": "siliconflow", "fontFamily": "fonts/msyh.ttc", "textDirection": "vertical", "prompt_content": "你是一个好用的翻译助手。请将我的非中文语句段落连成一句或几句话并翻译成中文，我发给你所有的话都是需要翻译的内容，你只需要回答翻译结果。特别注意：翻译结果字数不能超过原文字数！翻译结果请符合中文的语言习惯。", "use_textbox_prompt": false, "textbox_prompt_content": "你是一个专业的外语老师。请将我提供的非中文内容连成一句或几句话并翻译成中文。同时要告诉我为什么这么翻译，这句话有哪些知识点。", "use_inpainting": false, "use_lama": false, "blend_edges": true, "inpainting_strength": 1, "fill_color": "#ffffff", "text_color": "#231816", "rotation_angle": 0, "skip_ocr": false, "skip_translation": false, "bubble_coords": [[2384, 151, 2935, 888], [2435, 905, 3065, 1780], [112, 1864, 899, 2714], [36, 2672, 1033, 4086]], "ocr_engine": "auto", "baidu_ocr_api_key": null, "baidu_ocr_secret_key": null, "baidu_ocr_version": null, "ai_vision_provider": null, "ai_vision_api_key": null, "ai_vision_model_name": null, "ai_vision_ocr_prompt": null, "enableTextStroke": true, "textStrokeColor": "#ffffff", "textStrokeWidth": 3, "rpm_limit_translation": 0, "rpm_limit_ai_vision_ocr": 0, "use_json_format_translation": false, "use_json_format_ai_vision_ocr": false}[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:12:22 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:13:13 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:13:42 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"source_language": "japan", "fontSize": "25", "autoFontSize": false, "api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "fontFamily": "fonts/msyh.ttc", "textDirection": "vertical", "prompt_content": "你是一个好用的翻译助手。请将我的非中文语句段落连成一句或几句话并翻译成中文，我发给你所有的话都是需要翻译的内容，你只需要回答翻译结果。特别注意：翻译结果字数不能超过原文字数！翻译结果请符合中文的语言习惯。", "use_textbox_prompt": false, "textbox_prompt_content": "你是一个专业的外语老师。请将我提供的非中文内容连成一句或几句话并翻译成中文。同时要告诉我为什么这么翻译，这句话有哪些知识点。", "use_inpainting": false, "use_lama": false, "blend_edges": true, "inpainting_strength": 1, "fill_color": "#ffffff", "text_color": "#231816", "rotation_angle": 0, "skip_ocr": false, "skip_translation": false, "bubble_coords": [[2384, 151, 2935, 888], [2435, 905, 3065, 1780], [112, 1864, 899, 2714], [36, 2672, 1033, 4086]], "ocr_engine": "auto", "baidu_ocr_api_key": null, "baidu_ocr_secret_key": null, "baidu_ocr_version": null, "ai_vision_provider": null, "ai_vision_api_key": null, "ai_vision_model_name": null, "ai_vision_ocr_prompt": null, "enableTextStroke": true, "textStrokeColor": "#ffffff", "textStrokeWidth": 3, "rpm_limit_translation": 0, "rpm_limit_ai_vision_ocr": 0, "use_json_format_translation": false, "use_json_format_ai_vision_ocr": false}[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: fonts/msyh.ttc, 字号: 25[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=True, color=#ffffff, width=3[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:13:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: fonts/msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3065, 4096)[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m使用前端提供的手动标注气泡坐标，数量: 4[0m
2025-06-29 17:13:49 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 17:13:49 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=japan, 目标=zh, 修复=solid[0m
2025-06-29 17:13:49 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 17:13:49 - CoreProcessing - [32mINFO[0m - [32m使用前端提供的手动标注框，共 4 个[0m
2025-06-29 17:13:49 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 17:13:49 - CoreOCR - [32mINFO[0m - [32m源语言: japan, 自动选择 OCR 引擎: MangaOCR[0m
2025-06-29 17:13:49 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 4 个气泡...[0m
2025-06-29 17:13:49 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:13:50 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '明日は遂にバレンタインか．．．'[0m
2025-06-29 17:13:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:13:50 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: 'しーー．．．待っていたぞこの時を！'[0m
2025-06-29 17:13:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:13:50 - CoreOCR - [32mINFO[0m - [32m气泡 2 识别文本: '執事にはいつも私がいろいろもらってばかりだったが．．．'[0m
2025-06-29 17:13:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:13:50 - CoreOCR - [32mINFO[0m - [32m气泡 3 识别文本: '今年こそ最高の手作りチョコであいつもびっくりさせてやるぞ！！'[0m
2025-06-29 17:13:50 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 1.40s)[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 4[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '明日は遂にバレンタインか．．．'[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: 'しーー．．．待っていたぞこの時を！'[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 2: '執事にはいつも私がいろいろもらってばかりだったが．．．'[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 3: '今年こそ最高の手作りチョコであいつもびっくりさせてやるぞ！！'[0m
2025-06-29 17:13:50 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 17:13:50 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 4 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 17:13:50 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '明日は遂にバレンタインか．．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:13:55 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '明日は遂にバレンタインか．．．...' -> '明天终于到情人节了……...'[0m
2025-06-29 17:13:55 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'しーー．．．待っていたぞこの時を！...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:13:59 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'しーー．．．待っていたぞこの時を！...' -> '哼……我等的就是这一刻！...'[0m
2025-06-29 17:13:59 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にはいつも私がいろいろもらってばかりだったが．．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:14:02 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にはいつも私がいろいろもらってばかりだったが．．．...' -> '管家总是单方面给予我许多......'[0m
2025-06-29 17:14:02 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今年こそ最高の手作りチョコであいつもびっくりさせてやるぞ！！...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:14:06 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今年こそ最高の手作りチョコであいつもびっくりさせてやるぞ！！...' -> '今年我一定要做出最棒的手工巧克力，让他大吃一惊！...'[0m
2025-06-29 17:14:06 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 4[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '明天终于到情人节了……'[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '哼……我等的就是这一刻！'[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m文本 2 翻译结果: '管家总是单方面给予我许多...'[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m文本 3 翻译结果: '今年我一定要做出最棒的手工巧克力，让他大吃一惊！'[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 15.71s)[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 17:14:06 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 17:14:06 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3065, 3), 气泡数量：4[0m
2025-06-29 17:14:06 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:14:07 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 17:14:07 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 17:14:07 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.58s)[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 17:14:09 - CoreRendering - [32mINFO[0m - [32m开始渲染 4 个气泡的文本...[0m
2025-06-29 17:14:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:14:09 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts/msyh.ttc (大小: 25)[0m
2025-06-29 17:14:09 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 17:14:09 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 19.92s[0m
2025-06-29 17:14:11 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-29 17:14:18 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:14:18 - ConfigLoader - [32mINFO[0m - [32m成功保存 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:15:40 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:15:40 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:15:40 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:15:40 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:15:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:15:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:15:40 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:15:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:15:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:15:41 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:15:41 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:15:41 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-29 17:15:41 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-29 17:15:41 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:15:46 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:15:49 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\model_history.json[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "custom_base_url": "", "rpm_limit_translation": 0, "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "bubble_coords": [], "target_language": "zh", "source_language": "ja"}[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-29 17:18:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:18:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-29 17:18:50 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-29 17:18:50 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-29 17:18:50 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-29 17:18:50 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-29 17:18:50 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-29 17:18:50 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-29 17:18:50 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-29 17:18:50 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.55s)[0m
2025-06-29 17:18:50 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-29 17:18:50 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-29 17:18:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:18:51 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:18:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:18:51 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:18:51 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.67s)[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-29 17:18:51 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-29 17:18:51 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-29 17:18:51 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:19:06 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:19:06 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-29 17:19:11 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-29 17:19:11 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是准备好了最好的材料，还收集了连我都能做的完美食谱哦！"'[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 19.63s)[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-29 17:19:11 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-29 17:19:11 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-29 17:19:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:11 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-29 17:19:11 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-29 17:19:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.26s)[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-29 17:19:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-29 17:19:13 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-29 17:19:13 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 23.33s[0m
2025-06-29 17:19:15 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
