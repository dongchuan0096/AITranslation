2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:00:09 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:00:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:09 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:00:14 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:00:14 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:00:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:14 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:14 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:00:14 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:00:14 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:00:14 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:00:14 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:00:14 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:00:14 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:00:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:17 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:00:17 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:00:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:17 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:00:17 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:00:17 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:00:17 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:00:17 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:00:17 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:00:17 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:00:19 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.81 秒[0m
2025-06-27 09:00:19 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:00:31 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:00:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:31 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:31 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:00:34 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:00:34 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:00:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:34 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:00:34 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:00:34 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:00:34 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:00:34 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:00:34 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:00:34 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:00:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:35 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:00:35 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:00:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:36 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:00:36 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:00:36 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:00:36 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:00:36 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:00:36 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:00:36 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:00:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-27 09:00:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-27 09:00:36 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-27 09:00:36 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-27 09:00:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-27 09:00:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-27 09:00:36 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-27 09:00:36 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-27 09:00:36 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\prompts.json[0m
2025-06-27 09:00:36 - ConfigLoader - [33mWARNING[0m - [33mJSON 配置文件未找到: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\textbox_prompts.json，返回默认值。[0m
2025-06-27 09:00:36 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:00:37 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.49 秒[0m
2025-06-27 09:00:37 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:36:24 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:36:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:24 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:24 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:36:27 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:36:27 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:36:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:27 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:36:27 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:36:27 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:36:27 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:36:27 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:36:27 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:36:27 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:36:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:28 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:36:28 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:36:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:28 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:29 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:36:29 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:36:29 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:36:29 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:36:29 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:36:29 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:36:29 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:36:30 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.41 秒[0m
2025-06-27 09:36:30 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:36:59 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:36:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:36:59 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:37:02 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:37:02 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:37:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:02 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:37:02 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:37:02 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:37:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:37:02 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:37:02 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:37:02 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:37:03 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:03 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:37:04 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:37:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:04 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:04 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:37:04 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:37:04 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:37:04 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:37:04 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:37:04 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:37:04 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:37:05 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.41 秒[0m
2025-06-27 09:37:05 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:37:13 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:37:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:13 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:37:16 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:37:16 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:16 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:37:16 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:37:16 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:37:16 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:37:16 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:37:16 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:37:16 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:37:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:18 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:37:18 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:37:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:37:18 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:37:18 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:37:18 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:37:18 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:37:18 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:37:18 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:37:18 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:37:20 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.54 秒[0m
2025-06-27 09:37:20 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:38:42 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:38:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:42 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:42 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:38:46 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:38:46 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:38:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:46 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:46 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:38:46 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:38:46 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:38:46 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:38:46 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:38:46 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:38:46 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:38:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:47 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:38:47 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:38:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:38:47 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:38:47 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:38:47 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:38:47 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:38:47 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:38:47 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:38:47 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:38:49 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.43 秒[0m
2025-06-27 09:38:49 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m漫画翻译器启动[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m==============================[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m系统信息: Windows-10-10.0.22000-SP0[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32mPython版本: 3.9.21[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m已手动添加 '.js' 的 MIME 类型为 'text/javascript'[0m
2025-06-27 09:39:16 - comic_translator - [32mINFO[0m - [32m预加载YOLOv5气泡检测模型...[0m
2025-06-27 09:39:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:16 - YOLOInterface - [32mINFO[0m - [32m开始加载 YOLOv5 模型: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\weights\best.pt[0m
2025-06-27 09:39:19 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 模型加载成功，置信度设置为: 0.6[0m
2025-06-27 09:39:19 - comic_translator - [32mINFO[0m - [32mYOLOv5模型预加载成功[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m创建插件管理器实例...[0m
2025-06-27 09:39:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:19 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:19 - ConfigLoader - [32mINFO[0m - [32m成功加载 JSON 配置文件: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\config\plugin_default_states.json[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m已加载插件默认启用状态: {'示例插件': False, '文本装饰器': False}[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m插件管理器初始化，扫描目录: ['C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\src/plugins', 'C:\\Users\\Administrator\\Desktop\\flask\\Saber-Translator\\Saber-Translator-main\\plugins'][0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m开始发现和加载插件...[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src/plugins[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m扫描插件目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\plugins[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m发现插件类: ExamplePlugin in example_plugin[0m
2025-06-27 09:39:19 - Plugin.示例插件 - [32mINFO[0m - [32m示例插件正在设置...[0m
2025-06-27 09:39:19 - Plugin.示例插件 - [32mINFO[0m - [32m插件 '示例插件' 配置已加载: {}[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m插件 '示例插件' 加载、配置并设置成功。[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m发现插件类: TextAffixerPlugin in text_affixer[0m
2025-06-27 09:39:19 - Plugin.文本装饰器 - [32mINFO[0m - [32m'文本装饰器' 插件已加载并设置。[0m
2025-06-27 09:39:19 - Plugin.文本装饰器 - [32mINFO[0m - [32m插件 '文本装饰器' 配置已加载: {'text_prefix': '', 'text_suffix': '', 'apply_to_textbox': False}[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m插件 '文本装饰器' 加载、配置并设置成功。[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m插件加载完成，共加载 2 个插件。[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m根据用户设置启用插件...[0m
2025-06-27 09:39:19 - PluginManager - [32mINFO[0m - [32m共启用 0 个插件（根据用户设置）。[0m
2025-06-27 09:39:19 - comic_translator - [32mINFO[0m - [32m插件管理器初始化完成。[0m
2025-06-27 09:39:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:21 - LAMAInterface - [33mWARNING[0m - [33m未找到 sd-webui-cleaner 目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\sd-webui-cleaner，LAMA 功能不可用。[0m
2025-06-27 09:39:21 - comic_translator - [32mINFO[0m - [32m蓝图注册成功[0m
2025-06-27 09:39:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:21 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 09:39:21 - SystemAPI - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:39:21 - sakura_service_checker - [32mINFO[0m - [32m启动Sakura服务监控线程[0m
2025-06-27 09:39:21 - comic_translator - [32mINFO[0m - [32m服务监控线程已启动[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m在后台线程中预加载 MangaOCR 模型...[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m开始初始化 MangaOCR 实例，如果首次使用可能会自动下载模型文件。[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m已提高预加载线程优先级[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m检测到GPU: NVIDIA GeForce RTX 3050 Laptop GPU，将使用GPU加速[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程。[0m
2025-06-27 09:39:21 - MangaOCRInterface - [32mINFO[0m - [32m优先使用本地模型，已设置离线模式...[0m
2025-06-27 09:39:21 - comic_translator - [32mINFO[0m - [32m已启动 MangaOCR 模型预加载线程[0m
2025-06-27 09:39:21 - MangaOCRInterface - [33mWARNING[0m - [33m无法修改transformers网络请求函数: module 'transformers.utils' has no attribute 'http_get_request'[0m
2025-06-27 09:39:21 - comic_translator - [32mINFO[0m - [32m程序正在运行，请在浏览器中访问 http://127.0.0.1:5000/[0m
2025-06-27 09:39:22 - MangaOCRInterface - [32mINFO[0m - [32mMangaOCR 实例初始化成功。耗时: 1.39 秒[0m
2025-06-27 09:39:22 - MangaOCRInterface - [32mINFO[0m - [32m✅ MangaOCR 模型预加载成功，可以立即使用。[0m
2025-06-27 09:39:32 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 09:39:32 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Environmental protection is on...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 09:39:57 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Environmental protection is on...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-27 09:39:57 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 09:45:59 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 09:45:59 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '123...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 09:46:14 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '123...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-27 09:46:14 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 09:50:04 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 09:50:04 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Environmental protection is on...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 09:50:29 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Environmental protection is on...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 09:50:29 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 10:04:31 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 10:04:31 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'Environmental protection is on...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 10:04:56 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'Environmental protection is on...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 10:04:56 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 10:14:18 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 10:14:18 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'hello
...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 10:14:23 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'hello
...' -> 'Hello! 😊 How can I assist you ...'[0m
2025-06-27 10:14:23 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 14:30:20 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 14:30:20 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '11233...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 14:30:25 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '11233...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-27 14:30:25 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 14:52:39 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 14:52:39 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '识别失败...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 14:52:44 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '识别失败...' -> '{
"detected": "zh",
"translati...'[0m
2025-06-27 14:52:44 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 14:54:30 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 14:54:30 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today’s digital age, where ...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 14:54:50 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today’s digital age, where ...' -> '```json
{
  "detected": "en",
...'[0m
2025-06-27 14:54:50 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 15:02:15 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 15:02:15 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today’s digital age, where ...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:02:30 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today’s digital age, where ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 15:02:30 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 15:03:57 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 15:03:57 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today’s digital age, where ...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:04:14 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today’s digital age, where ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 15:04:14 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 15:07:17 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 15:07:17 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today’s digital age, where ...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:07:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today’s digital age, where ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 15:07:32 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 15:10:23 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 15:10:23 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: 'In today’s digital age, where ...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:10:49 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: 'In today’s digital age, where ...' -> '{
"detected": "en",
"translati...'[0m
2025-06-27 15:10:49 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 15:46:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:46:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3072, 4096)[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 15:46:02 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 15:46:02 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 15:46:02 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 15:46:02 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 15:46:03 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-27 15:46:03 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-27 15:46:03 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.80s)[0m
2025-06-27 15:46:03 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-27 15:46:05 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 15:47:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:47:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (1281, 1382)[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 15:47:11 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 15:47:11 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 15:47:11 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 15:47:11 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 15:47:11 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 0 个候选框 (阈值: 0.6)[0m
2025-06-27 15:47:11 - CoreDetection - [32mINFO[0m - [32m未检测到气泡。[0m
2025-06-27 15:47:11 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 0 个气泡 (耗时: 0.42s)[0m
2025-06-27 15:47:11 - CoreProcessing - [32mINFO[0m - [32m未检测到气泡，处理结束。[0m
2025-06-27 15:47:12 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 15:49:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 15:49:34 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 15:49:34 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 15:49:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 15:49:34 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 15:49:35 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 15:49:35 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 15:49:35 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 15:49:35 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.58s)[0m
2025-06-27 15:49:35 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 15:49:35 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 15:49:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:35 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:49:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:36 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:49:36 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.75s)[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:49:36 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 15:49:36 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 15:49:36 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:49:52 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:49:52 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:49:57 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:49:57 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很辛苦..."'[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经准备好了最好的食材和连我都能做的完美食谱！"'[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.99s)[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 15:49:57 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 15:49:57 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 15:49:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:57 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 15:49:57 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 15:49:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.27s)[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 36)[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 48)[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 54)[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 57)[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 59)[0m
2025-06-27 15:49:59 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m成功加载字体: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc (大小: 60)[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:49:59 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.05s)[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 15:49:59 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.87s[0m
2025-06-27 15:50:01 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 15:54:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:32 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 15:54:32 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 15:54:32 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 15:54:32 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 15:54:32 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 15:54:33 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 15:54:33 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 15:54:33 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.60s)[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 15:54:33 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 15:54:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:33 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:54:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:33 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:54:33 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.71s)[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:54:33 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 15:54:33 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 15:54:33 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:54:38 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:54:38 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:54:43 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:54:43 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很辛苦..."'[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我都能做的食谱！"'[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.99s)[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 15:54:43 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 15:54:43 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 15:54:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:43 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 15:54:43 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 15:54:43 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.50s)[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 15:54:46 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 15:54:46 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:54:46 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:54:46 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 15:54:46 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.04s[0m
2025-06-27 15:54:48 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 15:56:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:00 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 15:56:00 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 15:56:00 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 15:56:01 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 15:56:01 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 15:56:01 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 15:56:01 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 15:56:01 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 15:56:01 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.43s)[0m
2025-06-27 15:56:01 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 15:56:01 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 15:56:01 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:02 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:56:02 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:02 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:56:02 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.69s)[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 15:56:02 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 15:56:02 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 15:56:02 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:56:18 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:56:18 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 15:56:22 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 15:56:22 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的材料和连我都能做的食谱都准备齐全了！"'[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.63s)[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 15:56:22 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 15:56:23 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 15:56:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:23 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 15:56:23 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 15:56:23 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.74s)[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 15:56:25 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 15:56:25 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:56:25 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 15:56:25 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 15:56:25 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.78s[0m
2025-06-27 15:56:28 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:04:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:04:08 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:04:08 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:04:08 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:04:08 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:04:09 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:04:09 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:04:09 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:04:09 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.44s)[0m
2025-06-27 16:04:09 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:04:09 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:04:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:09 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:04:09 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:10 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:04:10 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.74s)[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:04:10 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:04:10 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:04:10 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:04:15 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:04:15 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:04:20 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:04:20 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很不容易..."'[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备好了最好的食材，连我都能做的食谱也全都收集齐了！"'[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 10.42s)[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:04:20 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:04:20 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:04:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:20 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:04:20 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:04:20 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.26s)[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:04:22 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:04:22 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:04:22 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:04:22 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.03s)[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:04:22 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.10s[0m
2025-06-27 16:04:24 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:07:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:07:17 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:07:17 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:07:17 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:07:17 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:07:18 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:07:18 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:07:18 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:07:18 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.52s)[0m
2025-06-27 16:07:18 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:07:18 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:07:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:18 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:07:18 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:19 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:07:19 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.69s)[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:07:19 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:07:19 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:07:19 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:07:34 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:07:34 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:07:39 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:07:39 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很不容易..."'[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是连最好的食材和连我都能做的食谱都准备齐全啦！"'[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.55s)[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:07:39 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:07:39 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:07:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:39 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:07:39 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:07:39 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.53s)[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:07:42 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:07:42 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:07:42 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:07:42 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:07:42 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.51s[0m
2025-06-27 16:07:44 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:08:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:08:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:08:56 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:08:56 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:08:56 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:08:56 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:08:57 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:08:57 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:08:57 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:08:57 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.47s)[0m
2025-06-27 16:08:57 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:08:57 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:08:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:08:57 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:08:57 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:08:58 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:08:58 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.72s)[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:08:58 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:08:58 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:08:58 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:09:02 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:09:02 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:09:08 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:09:08 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的食材，连我都能做的食谱也全都收集好了哦！"'[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 10.11s)[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:09:08 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:09:08 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:09:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:09:08 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:09:08 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:09:08 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.66s)[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:09:10 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:09:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:09:10 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:09:10 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.02s)[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:09:10 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 14.23s[0m
2025-06-27 16:09:13 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:11:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:11:33 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:11:33 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:11:33 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:11:33 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:11:33 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:11:33 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:11:33 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:11:33 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.50s)[0m
2025-06-27 16:11:33 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:11:33 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:11:33 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:34 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:11:34 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:34 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:11:34 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.76s)[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:11:34 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:11:34 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:11:34 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:11:41 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:11:41 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:11:47 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:11:47 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很不容易..."'[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的食材和连我都能做的食谱！"'[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 13.20s)[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:11:47 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:11:47 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:11:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:47 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:11:47 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:11:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.63s)[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:11:50 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:11:50 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:11:50 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:11:50 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:11:50 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 17.33s[0m
2025-06-27 16:11:52 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:15:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:15:15 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:15:15 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:15:15 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:15:15 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:15:15 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:15:15 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:15:15 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:15:15 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.41s)[0m
2025-06-27 16:15:15 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:15:15 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:15:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:16 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:15:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:16 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:15:16 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.72s)[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:15:16 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:15:16 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:15:16 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:15:32 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:15:32 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:15:37 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:15:37 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的材料和我都能做的食谱啦！"'[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.06s)[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:15:37 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:15:37 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:15:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:37 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:15:37 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:15:37 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.27s)[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:15:39 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:15:39 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:15:39 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:15:39 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.00s)[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:15:39 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.71s[0m
2025-06-27 16:15:41 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 16:16:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:15 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 16:16:15 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 16:16:15 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 16:16:16 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 16:16:16 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 16:16:16 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 16:16:16 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 16:16:16 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 16:16:16 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.53s)[0m
2025-06-27 16:16:16 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 16:16:16 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 16:16:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:16 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:16:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:17 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:16:17 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.67s)[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 16:16:17 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 16:16:17 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 16:16:17 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:16:21 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:16:21 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 16:16:27 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 16:16:27 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这种地步真的很辛苦..."'[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是连最好的食材和连我都能做的食谱都准备齐全啦！"'[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 9.77s)[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 16:16:27 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 16:16:27 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 16:16:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:27 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 16:16:27 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 16:16:27 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.29s)[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 16:16:29 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 16:16:29 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:16:29 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 16:16:29 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 16:16:29 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 13.48s[0m
2025-06-27 16:16:31 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 17:01:59 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 17:01:59 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音识别与翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:02:14 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音识别与翻译。...' -> '```json
{
"detected": "zh",
"t...'[0m
2025-06-27 17:02:14 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 17:02:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:02:50 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 17:02:50 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 17:02:50 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 17:02:50 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 17:02:50 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 17:02:51 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 17:02:51 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 17:02:51 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 17:02:51 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.82s)[0m
2025-06-27 17:02:51 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 17:02:51 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 17:02:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:02:51 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:02:51 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:02:52 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:02:52 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.82s)[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:02:52 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 17:02:52 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 17:02:52 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:03:10 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:03:10 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:03:16 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:03:16 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不被管家发现而准备到这种程度真的很辛苦..."'[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的食材和连我都能做的食谱都准备齐全了！"'[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 24.48s)[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 17:03:16 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 17:03:16 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 17:03:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:03:16 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 17:03:16 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 17:03:16 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.79s)[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 17:03:19 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 17:03:19 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:03:19 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:03:19 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 17:03:19 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 29.13s[0m
2025-06-27 17:03:21 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 17:08:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:08:47 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 17:08:47 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 17:08:47 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 17:08:48 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 17:08:48 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 17:08:48 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 17:08:48 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 17:08:48 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 17:08:48 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.28s)[0m
2025-06-27 17:08:48 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 17:08:48 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 17:08:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:08:48 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:08:48 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:08:49 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:08:49 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.73s)[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:08:49 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 17:08:49 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 17:08:49 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:09:04 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:09:04 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:09:10 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:09:10 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这个地步真的很不容易..."'[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我可是连最好的食材和连我都能做的食谱都准备齐全了！"'[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 21.23s)[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 17:09:10 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 17:09:10 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 17:09:10 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:09:10 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 17:09:10 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 17:09:10 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.17s)[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 17:09:12 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 17:09:12 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:09:12 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:09:12 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 17:09:12 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.68s[0m
2025-06-27 17:09:14 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 17:11:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:11 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 17:11:11 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 17:11:11 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 17:11:12 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 17:11:12 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 17:11:12 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 17:11:12 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 17:11:12 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 17:11:12 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.56s)[0m
2025-06-27 17:11:12 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 17:11:12 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 17:11:12 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:13 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:11:13 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:13 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:11:13 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.82s)[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:11:13 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 17:11:13 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 17:11:13 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:11:29 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:11:29 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:11:35 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:11:35 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天我可是准备了最好的材料，还收集了连我都能做的完美食谱呢！"'[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 22.04s)[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 17:11:35 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 17:11:35 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 17:11:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:35 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 17:11:35 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 17:11:35 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.58s)[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 17:11:38 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 17:11:38 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:11:38 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:11:38 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 17:11:38 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 26.28s[0m
2025-06-27 17:11:40 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m请求参数（不含图片数据）: {"api_key": "sk-da5ff127540d4c9cb8ff1bb1ae16f71d", "model_name": "deepseek-chat", "model_provider": "deepseek", "prompt_content": "你是一个语言识别与翻译助手。请完成以下两件事：（1）判断我提供的原文属于哪种语言，输出该语言的 ISO 639-1 两位语言代码（如 zh 表示中文，en 表示英文，ja 表示日文；（2）将该段原文翻译为我指定的目标语言，翻译时请尽量保持含义准确、语言自然，并控制在不超过原文长度的范围内。\n请按以下格式输出：\n\"detected\": \"<原文语言代码>\",\n\"translation\": \"<翻译后的文本>\" \n我的目标语言是：{target_language}\n以下是需要处理的原文：{text}", "fontSize": 16, "autoFontSize": true, "fontFamily": "msyh.ttc", "textDirection": "vertical", "rotation_angle": 0, "enableTextStroke": false, "textStrokeColor": "#ffffff", "textStrokeWidth": 2, "ocr_engine": "manga_ocr", "baidu_api_key": "", "baidu_secret_key": "", "baidu_version": "standard", "ai_vision_provider": "siliconflow", "ai_vision_api_key": "", "ai_vision_model_name": "", "ai_vision_ocr_prompt": "", "custom_ai_vision_base_url": "", "use_json_format_ai_vision_ocr": false, "rpm_limit_ai_vision_ocr": 0, "fill_color": "#ffffff", "text_color": "#6D1C1CFF", "use_inpainting": false, "blend_edges": true, "inpainting_strength": 50, "use_lama": false, "skip_translation": false, "skip_ocr": false, "remove_only": false, "use_textbox_prompt": false, "textbox_prompt_content": "", "use_json_format_translation": false, "rpm_limit_translation": 0, "bubble_coords": [], "target_language": "zh", "source_language": "ja", "custom_base_url": ""}[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m----- 翻译请求参数 -----[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m气泡填充方式: useInpainting=False, useLama=False[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m文字方向: vertical, 字体: msyh.ttc, 字号: 16[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m跳过翻译: False, 跳过OCR: False[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m仅消除模式: False[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32mJSON输出模式: 翻译=False, AI视觉OCR=False[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32mrpm 设置: 翻译服务 rpm=0, AI视觉OCR rpm=0[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m描边设置: enable=False, color=#ffffff, width=2[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m------------------------[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m自定义 OpenAI Base URL: 未提供[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m使用自动字体大小[0m
2025-06-27 17:36:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:36:55 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m原始字体路径: msyh.ttc, 修正后: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main\src\app\static\fonts\msyh.ttc[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m图像成功加载，大小: (3066, 4096)[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m未提供手动标注气泡坐标，将自动检测[0m
2025-06-27 17:36:55 - TranslateAPI - [32mINFO[0m - [32m使用纯色填充方式[0m
2025-06-27 17:36:55 - CoreProcessing - [32mINFO[0m - [32m开始处理图像翻译流程: 源=ja, 目标=zh, 修复=solid[0m
2025-06-27 17:36:55 - CoreProcessing - [32mINFO[0m - [32mBEFORE_PROCESSING 钩子修改了参数/图像。[0m
2025-06-27 17:36:55 - CoreProcessing - [32mINFO[0m - [32m步骤 1: 检测气泡坐标...[0m
2025-06-27 17:36:56 - YOLOInterface - [32mINFO[0m - [32mYOLOv5 检测到 2 个候选框 (阈值: 0.6)[0m
2025-06-27 17:36:56 - CoreDetection - [32mINFO[0m - [32m检测到 2 个气泡候选框。[0m
2025-06-27 17:36:56 - CoreDetection - [32mINFO[0m - [32m最终获取并排序了 2 个有效气泡坐标。[0m
2025-06-27 17:36:56 - CoreProcessing - [32mINFO[0m - [32m气泡检测完成，找到 2 个气泡 (耗时: 0.42s)[0m
2025-06-27 17:36:56 - CoreProcessing - [32mINFO[0m - [32m步骤 2: OCR 识别文本...[0m
2025-06-27 17:36:56 - CoreOCR - [32mINFO[0m - [32m开始使用 MangaOCR 逐个识别 2 个气泡...[0m
2025-06-27 17:36:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:36:56 - CoreOCR - [32mINFO[0m - [32m气泡 0 识别文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:36:56 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:36:57 - CoreOCR - [32mINFO[0m - [32m气泡 1 识别文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:36:57 - CoreOCR - [32mINFO[0m - [32mMangaOCR 识别完成。[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32mOCR 完成 (耗时: 0.65s)[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32mBEFORE_TRANSLATION 钩子修改了文本或参数。[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m步骤 3: 翻译文本...[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m翻译模型: deepseek, 模型名称: deepseek-chat[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本数量: 2[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 0: '執事にバレないようにここまで準備するのはホントに大変だっ．．．'[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m待翻译文本 1: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集めたからな！'[0m
2025-06-27 17:36:57 - CoreProcessing - [32mINFO[0m - [32m调用 translate_text_list 开始 - 模型: deepseek, 模型名: deepseek-chat, API密钥长度: 35, 自定义BaseURL: 无[0m
2025-06-27 17:36:57 - CoreTranslation - [32mINFO[0m - [32m开始批量翻译 2 个文本片段 (使用 deepseek, rpm: 无)...[0m
2025-06-27 17:36:57 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:37:12 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '執事にバレないようにここまで準備するのはホントに大変だっ．．...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:37:12 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:37:17 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '今日のために最高の材料と私でも作れそうなレシピもバッチリ集め...' -> '"detected": "ja",
"translation...'[0m
2025-06-27 17:37:17 - CoreTranslation - [32mINFO[0m - [32m批量翻译完成。[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32mtranslate_text_list 调用完成，返回结果数量: 2[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32m翻译结果:[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32m文本 0 翻译结果: '"detected": "ja",
"translation": "为了不让管家发现而准备到这一步真的很辛苦..."'[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32m文本 1 翻译结果: '"detected": "ja",
"translation": "为了今天，我已经完美收集了最好的材料和我都能做的食谱！"'[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32m翻译完成 (耗时: 20.56s)[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32mAFTER_TRANSLATION 钩子修改了翻译结果。[0m
2025-06-27 17:37:17 - CoreProcessing - [32mINFO[0m - [32m步骤 4: 修复/填充背景 (方法: solid)...[0m
2025-06-27 17:37:17 - CoreInpainting - [32mINFO[0m - [32m创建气泡掩码，图像大小：(4096, 3066, 3), 气泡数量：2[0m
2025-06-27 17:37:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:37:17 - CoreInpainting - [32mINFO[0m - [32m执行纯色填充，颜色: #ffffff[0m
2025-06-27 17:37:17 - CoreInpainting - [32mINFO[0m - [32m纯色填充完成，已生成对应的'干净'背景。[0m
2025-06-27 17:37:17 - PathHelpers - [32mINFO[0m - [32m开发环境中，项目根目录: C:\Users\Administrator\Desktop\flask\Saber-Translator\Saber-Translator-main[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32m背景处理完成 (耗时: 2.51s)[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_INPAINTING 钩子修改了图像。[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32mBEFORE_RENDERING 钩子修改了渲染参数。[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32m步骤 5: 渲染翻译文本...[0m
2025-06-27 17:37:20 - CoreRendering - [32mINFO[0m - [32m开始渲染 2 个气泡的文本...[0m
2025-06-27 17:37:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:37:20 - CoreRendering - [32mINFO[0m - [32m自动计算的最佳字体大小: 60px (范围: 12-60)[0m
2025-06-27 17:37:20 - CoreRendering - [32mINFO[0m - [32m所有气泡文本渲染完成。[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32m文本渲染完成 (耗时: 0.01s)[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32mAFTER_PROCESSING 钩子修改了最终结果。[0m
2025-06-27 17:37:20 - CoreProcessing - [32mINFO[0m - [32m图像翻译流程完成，总耗时: 24.35s[0m
2025-06-27 17:37:22 - TranslateAPI - [32mINFO[0m - [32m返回参数 keys: ['translated_image', 'clean_image', 'original_texts', 'bubble_texts', 'textbox_texts', 'bubble_coords'][0m
2025-06-27 17:49:10 - TextTranslateAPI - [32mINFO[0m - [32m开始调用translate_single_text函数进行翻译... JSON模式: False, 自定义BaseURL: 无, rpm: 0[0m
2025-06-27 17:49:10 - CoreTranslation - [32mINFO[0m - [32m开始翻译文本: '语音翻译，漫画翻译，文本翻译。...' (服务商: deepseek, rpm: 无)[0m
2025-06-27 17:49:16 - CoreTranslation - [32mINFO[0m - [32m最终翻译成功: '语音翻译，漫画翻译，文本翻译。...' -> '"detected": "zh",
"translation...'[0m
2025-06-27 17:49:16 - TextTranslateAPI - [33mWARNING[0m - [33m保存模型历史时出错: save_model_info_api() takes 0 positional arguments but 2 were given[0m
